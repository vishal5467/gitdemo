if (self.CavalryLogger) { CavalryLogger.start_js(["cplRo"]); }

__d("CollectionThumbnail.react",["cssVar","cx","fbt","BackgroundImage.react","Focus","React","isKeyActivation","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$CollectionThumbnail2=function(t){if(c("isKeyActivation")(t))this.props.onClick&&this.props.onClick(t)}.bind(this),p}n.prototype.focus=function(){c("Focus").set(this.$CollectionThumbnail1,true)};n.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_2vw6"),onClick:this.props.onClick,onKeyDown:this.$CollectionThumbnail2,tabIndex:0,ref:function(o){return this.$CollectionThumbnail1=o}.bind(this),role:"button"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"cover",height:parseInt("140px",10),src:this.props.thumbnailURL,width:parseInt("140px",10)}),c("React").createElement("div",{className:"_3iom"},c("React").createElement("div",{className:"_3ion"},c("React").createElement(c("BackgroundImage.react"),{backgroundPosition:"100% 50%",className:"_1x7m",height:12,src:this.props.privacyIcon,width:12}),this.props.collectionName),c("React").createElement("div",{className:"_3ioo"},j._({"*":"{number of posts} posts","_1":"1 post"},[j.plural(this.props.numPosts,"number of posts")]))))};n.propTypes={collectionID:m.oneOfType([m.string,m.number]).isRequired,collectionName:m.string.isRequired,className:m.string,numPosts:m.number.isRequired,onClick:m.func,thumbnailURL:m.string.isRequired,privacyIcon:m.string};f.exports=n}),null);
__d("ReactComposerCollectionSelector.react",["ix","cssVar","cx","fbt","AccessibleLayer","BootloadedComponent.react","CollectionThumbnail.react","ContextualLayer.react","ContextualLayerAutoFlip","Grid.react","JSResource","ReactComposerAudienceActions","ReactComposerCollectionsActions","ReactComposerCollectionsStore","ReactComposerLoggingActions","ReactComposerLoggingName","InlineBlock.react","Image.react","LayerAutoFocus","LayerHideOnEscape","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnBlur","LayerTabIsolation","Link.react","SharingSpacesFunnelLogging","SharingSpacesQEStrings","SharingSpacesStrings","ShimButton.react","XUIAmbientNUX.react","XUIButton.react","XUICard.react","XUICardHeader.react","XUICardHeaderTitle.react","XUICardSection.react","XUIPopoverButton.react","XUISpinner.react","ReactComposerContextTypes","React","ReactDOM","fbglyph","focusWithinLayer","ifRequired","isKeyActivation"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("Grid.react").GridItem;l=babelHelpers.inherits(o,c("React").PureComponent);m=l&&l.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.$ReactComposerCollectionSelector1=null,this.$ReactComposerCollectionSelector3=function(){if(!this.props.selectorVisible)c("ReactComposerCollectionsActions").showCollectionsSelector(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_SELECTOR_BUTTON)}.bind(this),this.$ReactComposerCollectionSelector4=function(u){if(c("isKeyActivation")(u))this.$ReactComposerCollectionSelector5(u.nativeEvent)}.bind(this),this.$ReactComposerCollectionSelector5=function(u){c("ReactComposerAudienceActions").setCollectionID(this.context.composerID,c("ReactComposerLoggingName").COLLECTION_CLEAR_BUTTON,null);u.stopPropagation()}.bind(this),this.$ReactComposerCollectionSelector6=function(u){var v=arguments.length<=1||arguments[1]===undefined?c("ReactComposerLoggingName").OTHERS:arguments[1];if(!u&&this.props.selectorVisible)c("ReactComposerCollectionsActions").hideCollectionsSelector(this.context.composerID,v)}.bind(this),this.$ReactComposerCollectionSelector7=function(){c("ReactComposerCollectionsActions").hideCollectionsSelectorWithoutLogging(this.context.composerID);c("ReactComposerCollectionsActions").showCreationLayer(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_SELECTOR_CREATE_BUTTON)}.bind(this),this.$ReactComposerCollectionSelector8=function(){c("ReactComposerCollectionsActions").hideCreationLayer(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_CANCEL_BUTTON,true);c("ReactComposerLoggingActions").collectionSelectorCancel(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_CANCEL_BUTTON)}.bind(this),this.$ReactComposerCollectionSelector9=function(u){c("ReactComposerCollectionsStore").addNewAlbum(this.context.composerID,u);c("ReactComposerCollectionsActions").hideCreationLayer(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_SUBMIT_BUTTON);c("ReactComposerLoggingActions").collectionSelectorDone(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_SUBMIT_BUTTON);this.$ReactComposerCollectionSelector10(u)}.bind(this),this.$ReactComposerCollectionSelector11=function(){c("ReactComposerCollectionsActions").hideCollectionsSelectorWithoutLogging(this.context.composerID);c("ReactComposerCollectionsActions").showSharingSpaceCreationLayer(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_SELECTOR_CREATE_SHARING_SPACE_BUTTON);c("SharingSpacesFunnelLogging").startFunnel("entry_point_name_channel_picker")}.bind(this),this.$ReactComposerCollectionSelector12=function(){c("ReactComposerCollectionsActions").hideSharingSpaceCreationLayer(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_SHARING_SPACE_CANCEL_BUTTON,true);c("ReactComposerLoggingActions").collectionSelectorCancel(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_SHARING_SPACE_CANCEL_BUTTON)}.bind(this),this.$ReactComposerCollectionSelector13=function(u){var v=u.payload.collectionThumbnailData;c("ReactComposerCollectionsStore").addNewSharingSpace(this.context.composerID,v);c("ReactComposerLoggingActions").collectionSelectorDone(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_SHARING_SPACE_SUBMIT_BUTTON);this.$ReactComposerCollectionSelector10(v);c("ReactComposerCollectionsActions").hideSharingSpaceCreationLayer(this.context.composerID,c("ReactComposerLoggingName").COLLECTIONS_CREATE_SHARING_SPACE_SUBMIT_BUTTON)}.bind(this),q}o.prototype.componentDidUpdate=function(p,q){__p&&__p();if(this.props.selectorVisible&&!p.selectorVisible)if(this.props.selectedCollectionID){var r=c("ReactDOM").findDOMNode(this.refs[this.props.selectedCollectionID]);if(r!==null&&this.$ReactComposerCollectionSelector1!==null){var s=c("ReactDOM").findDOMNode(this.$ReactComposerCollectionSelector1);if(s!==null)s.scrollTop=r.offsetTop}}if(p.collections&&p.collections.isLoading()&&this.props.collections&&!this.props.collections.isLoading()){var t=c("ReactDOM").findDOMNode(this.$ReactComposerCollectionSelector2);t&&c("focusWithinLayer")(t,true)}};o.prototype.$ReactComposerCollectionSelector10=function(p){if(p.id==this.props.selectedCollectionID)c("ReactComposerAudienceActions").setCollectionID(this.context.composerID,c("ReactComposerLoggingName").COLLECTION_SELECTED,null);else c("ReactComposerAudienceActions").setCollectionID(this.context.composerID,c("ReactComposerLoggingName").COLLECTION_SELECTED,p.id,p.privacyLabel);this.$ReactComposerCollectionSelector6(false,c("ReactComposerLoggingName").COLLECTION_SELECTED);c("ifRequired")("ReactComposerPostToGroupActions",function(q){return q.unselectTab(this.context.composerID)}.bind(this))};o.prototype.$ReactComposerCollectionSelector14=function(p){if(p==null)return null;var q=c("ReactComposerCollectionsStore").getCollectionByID(this.context.composerID,p);if(q)return q.name;return null};o.prototype.$ReactComposerCollectionSelector15=function(p){if(p){var q=this.$ReactComposerCollectionSelector14(p);if(q)return q}return k._("+ Album").toString()};o.prototype.$ReactComposerCollectionSelector16=function(){return c("React").createElement(c("ShimButton.react"),{className:(!this.props.selectedCollectionID&&!this.props.canCreateSharingSpace?"autofocus":"")+" _2vw6 _1xp0",key:"addAlbumButton",onClick:this.$ReactComposerCollectionSelector7},c("React").createElement("div",{className:"_1xp2"},c("React").createElement("div",{className:"_1xp3"}),k._("Create Album")))};o.prototype.$ReactComposerCollectionSelector17=function(){return c("React").createElement(c("ShimButton.react"),{className:(!this.props.selectedCollectionID?"autofocus":"")+" _2vw6 _1xp0",key:"addSharingSpaceButton",onClick:this.$ReactComposerCollectionSelector11},c("React").createElement("div",{className:"_1xp2"},c("React").createElement("div",{className:"_1xp3"}),c("SharingSpacesStrings").SHOW_SPACE_CREATION_BUTTON_TEXT))};o.prototype.$ReactComposerCollectionSelector18=function(){return c("React").createElement("div",{key:"albumsNullState",className:"_1d5t"},c("React").createElement("span",{className:"_1d5u"}),c("React").createElement("div",{className:"_1d5v"},k._("No albums to show")),c("React").createElement(c("XUIButton.react"),{label:k._("Create Album"),use:"confirm",onClick:this.$ReactComposerCollectionSelector7}))};o.prototype.$ReactComposerCollectionSelector19=function(){return c("React").createElement("div",{key:"sharingSpacesNullState"},c("React").createElement("span",{className:"_1xp4"}),c("React").createElement("div",{className:"_1d5v"},k._("No spaces to show")),c("React").createElement(c("XUIButton.react"),{label:k._("Create Sharing Space"),use:"confirm",onClick:this.$ReactComposerCollectionSelector11}))};o.prototype.$ReactComposerCollectionSelector20=function(){var p=this.props.collections&&this.props.collections.getValue(),q=this.props.canCreateSharingSpace?this.$ReactComposerCollectionSelector17():null;return[c("React").createElement("h1",{key:"sharingSpacesHeader"},c("SharingSpacesQEStrings").contentProductNamePlural),!p||!p.sharingSpaces||p.sharingSpaces.length===0?this.$ReactComposerCollectionSelector19():this.$ReactComposerCollectionSelector21("sharingSpacesGrid",q,p.sharingSpaces)]};o.prototype.$ReactComposerCollectionSelector22=function(){var p=this.props.collections&&this.props.collections.getValue(),q=this.$ReactComposerCollectionSelector16();return[this.props.showSharingSpaces?c("React").createElement("h1",{key:"albumsHeader"},k._("Albums")):null,!p||!p.albums||p.albums.length===0?this.$ReactComposerCollectionSelector18():this.$ReactComposerCollectionSelector21("albumsGrid",q,p.albums)]};o.prototype.$ReactComposerCollectionSelector21=function(p,q,r){var s=[q];if(r)s.push(r.map(function(t){return c("React").createElement(n,{ref:t.id,key:t.id,className:t.id===this.props.selectedCollectionID?"_5zfq":""},c("React").createElement(c("CollectionThumbnail.react"),{className:t.id===this.props.selectedCollectionID?"autofocus":"",collectionID:t.id,collectionName:t.name,numPosts:t.numPosts,onClick:function(){return this.$ReactComposerCollectionSelector10(t)}.bind(this),thumbnailURL:t.thumbnailURL,privacyIcon:t.privacyIcon}))}.bind(this)));return c("React").createElement(c("Grid.react"),{key:p,className:"_1d5w",cols:2,fixed:false},s)};o.prototype.$ReactComposerCollectionSelector23=function(){if(!this.props.collections)return null;else return c("React").createElement(c("ContextualLayer.react"),{behaviors:{AccessibleLayer:c("AccessibleLayer"),ContextualLayerAutoFlip:c("ContextualLayerAutoFlip"),LayerAutoFocus:c("LayerAutoFocus"),LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape"),LayerFadeOnShow:c("LayerFadeOnShow"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerTabIsolation:c("LayerTabIsolation")},contextRef:function(){return this.refs.collectionSelectorTrigger}.bind(this),onToggle:this.$ReactComposerCollectionSelector6,position:"below",shown:this.props.selectorVisible},c("React").createElement(c("XUICard.react"),{className:"_5ze9"},c("React").createElement(c("XUICardHeader.react"),{className:"_5zea",type:"primary"},c("React").createElement(c("XUICardHeaderTitle.react"),null,k._("Albums"))),c("React").createElement(c("XUICardSection.react"),{ref:function(p){return this.$ReactComposerCollectionSelector1=p}.bind(this),className:"_5zeh"},!this.props.collections||this.props.collections.isLoading()?c("React").createElement("div",{className:"_2n10"},c("React").createElement(c("XUISpinner.react"),{size:"large"})):c("React").createElement("div",{ref:function(p){return this.$ReactComposerCollectionSelector2=p}.bind(this)},this.props.showSharingSpaces?this.$ReactComposerCollectionSelector20():null,this.$ReactComposerCollectionSelector22()))))};o.prototype.$ReactComposerCollectionSelector24=function(){if(this.props.creationLayerVisible)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ReactComposerCollectionCreationDialog.react").__setRef("ReactComposerCollectionSelector.react"),bootloadPlaceholder:c("React").createElement("span",null),composerID:this.context.composerID,dialogProps:{behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:c("LayerFadeOnShow")},causalElementRef:function(){return this.refs.collectionSelectorTrigger}.bind(this),shown:this.props.creationLayerVisible,width:parseInt("375px",10)},onCancel:this.$ReactComposerCollectionSelector8,onAlbumCreated:this.$ReactComposerCollectionSelector9});else return null};o.prototype.$ReactComposerCollectionSelector25=function(){if(this.props.sharingSpaceCreationLayerVisible)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ReactComposerSharingSpaceCreationDialog.react").__setRef("ReactComposerCollectionSelector.react"),bootloadPlaceholder:c("React").createElement("span",null),composerID:this.context.composerID,dialogProps:{behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:c("LayerFadeOnShow")},causalElementRef:function(){return this.refs.collectionSelectorTrigger}.bind(this),shown:this.props.sharingSpaceCreationLayerVisible,width:parseInt("375px",10)},isCreationFriendsOptIn:this.context.gks&&this.context.gks.isCreationFriendsOptIn,onCancel:this.$ReactComposerCollectionSelector12,onSharingSpaceCreated:this.$ReactComposerCollectionSelector13,sharesheetPrivacyOptions:this.context.gks&&this.context.gks.sharesheetPrivacyOptions,showSecretPrivacyAsHidden:this.context.gks&&this.context.gks.showSecretPrivacyAsHidden,useEyeCrossForHidden:this.context.gks&&this.context.gks.useEyeCrossForHidden});else return null};o.prototype.$ReactComposerCollectionSelector26=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.collectionSelectorTrigger}.bind(this),shown:this.props.showAnyPostTypeNux,onCloseButtonClick:this.props.onAnyPostTypeNuxClose,position:this.props.alternateTriggerComponent?"below":"above"},k._("Now you can add posts, check-ins and more to albums"))};o.prototype.render=function(){var p=!!this.$ReactComposerCollectionSelector14(this.props.selectedCollectionID);return c("React").createElement(c("InlineBlock.react"),{className:"uiContextualLayerParent"},this.props.alternateTriggerComponent?c("React").createElement(c("Link.react"),{role:"button",onClick:this.$ReactComposerCollectionSelector3,ref:"collectionSelectorTrigger"},this.props.alternateTriggerComponent):c("React").createElement(c("XUIPopoverButton.react"),{className:"_5ze8",label:this.$ReactComposerCollectionSelector15(this.props.selectedCollectionID),onClick:this.$ReactComposerCollectionSelector3,ref:"collectionSelectorTrigger",use:"confirm",chevron:p?c("React").createElement(c("Image.react"),{onClick:this.$ReactComposerCollectionSelector5,onKeyDown:this.$ReactComposerCollectionSelector4,role:"button",src:h("114707"),tabIndex:0}):null}),this.$ReactComposerCollectionSelector23(),this.$ReactComposerCollectionSelector24(),this.$ReactComposerCollectionSelector25(),this.$ReactComposerCollectionSelector26())};o.defaultProps={collections:null,creationLayerVisible:false,sharingSpaceCreationLayerVisible:false,selectedCollectionID:null,selectorVisible:false,showAnyPostTypeNux:false};o.contextTypes=c("ReactComposerContextTypes");f.exports=o}),null);
__d("ReactComposerCollectionSelectorContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerAudienceStore","ReactComposerCollectionSelector.react","ReactComposerCollectionsStore","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","SimpleNUXMessage","SimpleNUXMessageTypes"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerCollectionSelectorContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerAudienceStore"),c("ReactComposerCollectionsStore"))],propTypes:{alternateTriggerComponent:h.element,addAnyPostToAlbum:h.bool,canCreateSharingSpace:h.bool.isRequired,showSharingSpaces:h.bool.isRequired},statics:{calculateState:function j(k,l){return{collections:c("ReactComposerCollectionsStore").getCollections(k),selectedCollectionID:c("ReactComposerAudienceStore").getCollectionID(k),isSelectorVisible:c("ReactComposerCollectionsStore").isSelectorVisible(k),isCreationLayerVisible:c("ReactComposerCollectionsStore").isCreationLayerVisible(k),isSharingSpaceCreationLayerVisible:c("ReactComposerCollectionsStore").isSharingSpaceCreationLayerVisible(k),showAnyPostTypeNux:l.addAnyPostToAlbum&&!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").ALBUMSV2_ANY_POST_TYPE_WWW)}}},_onAnyPostTypeNuxClose:function j(){c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").ALBUMSV2_ANY_POST_TYPE_WWW);this.setState({showAnyPostTypeNux:false})},render:function j(){return c("React").createElement(c("ReactComposerCollectionSelector.react"),{alternateTriggerComponent:this.props.alternateTriggerComponent,collections:this.state.collections,creationLayerVisible:this.state.isCreationLayerVisible,sharingSpaceCreationLayerVisible:this.state.isSharingSpaceCreationLayerVisible,selectedCollectionID:this.state.selectedCollectionID,selectorVisible:this.state.isSelectorVisible,showAnyPostTypeNux:this.state.showAnyPostTypeNux,onAnyPostTypeNuxClose:this._onAnyPostTypeNuxClose,canCreateSharingSpace:this.props.canCreateSharingSpace,showSharingSpaces:this.props.showSharingSpaces})}});f.exports=i}),null);