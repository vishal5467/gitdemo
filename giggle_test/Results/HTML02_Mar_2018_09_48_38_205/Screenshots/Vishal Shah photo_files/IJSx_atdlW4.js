if (self.CavalryLogger) { CavalryLogger.start_js(["hqoL4"]); }

__d("BusinessActorUtils.brands",["UnicodeCJK"],(function a(b,c,d,e,f,g){"use strict";var h={getInitials:function i(j,k){var l=j.trim().charAt(0),m=k.trim().charAt(0),n=l+m;return!c("UnicodeCJK").hasIdeograph(n)?n.toUpperCase():m}};f.exports=h}),null);
__d("UFICommentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$UFICommentTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$UFICommentTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers["extends"]({},this.$UFICommentTypedLogger1,j);return this};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h}),null);
__d("UFICommentLogger",["UFICommentTypedLogger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={}}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers["extends"]({timestamp:j},k);new(c("UFICommentTypedLogger"))().setEvent("new_comment_post").setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new(c("UFICommentTypedLogger"))().setEvent("new_comment_received").setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()}delete this.$UFICommentLogger2[i]};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers["extends"]({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined)this.$UFICommentLogger1[i]=[l];else this.$UFICommentLogger1[i].push(l);new(c("UFICommentTypedLogger"))().setEvent("fetch_comment").setIsReply(k.is_reply).setRequestLength(k.request_length).log()};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new(c("UFICommentTypedLogger"))().setEvent("fetch_comment_received").setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i]}};f.exports=new h()}),null);
__d("UFIStoryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"})}),null);
__d("UFIAcceptedAnswerStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER:return babelHelpers["extends"]({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:"Accepted",id:l.comment.id}:{type:"NoneAccepted"},m));default:return k}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:"Accepted",id:l}:{type:"NoneAccepted"}};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFICentralUpdates",["Arbiter","BanzaiODS","LiveTimer","ShortProfiles","UFIConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();c("BanzaiODS").setEntitySample("feedback",1e-4);var h=0,i={},j={},k=[];function l(){__p&&__p();if(!h){var p=i,q=j;i={};j={};if(Object.keys(p).length)n("feedback-updated",p);if(Object.keys(q).length)n("comments-updated",q);k.pop()}}function m(){if(k.length)return k[k.length-1];else return c("UFIConstants").UFIPayloadSourceType.UNKNOWN}function n(event,p){o.inform(event,{updates:p,payloadSource:m()})}var o=Object.assign(new(c("Arbiter"))(),{handleUpdate:function p(q,r){__p&&__p();if(Object.keys(r).length)this.synchronizeInforms(function(){k.push(q);var s=babelHelpers["extends"]({payloadsource:m()},r);this.inform("update-feedback",s);this.inform("update-comment-lists",s);this.inform("update-comments",s);this.inform("update-actions",s);c("ShortProfiles").setMulti(r.profiles||{});if(r.servertime)c("LiveTimer").restart(r.servertime)}.bind(this))},didUpdateFeedback:function p(q){i[q]=true;l()},didUpdateComment:function p(q){j[q]=true;l()},synchronizeInforms:function p(q){h++;try{q()}catch(r){throw r}finally{h--;l()}}});f.exports=o}),18);
__d("UFICommentEditIDStore",["FluxReduceStore","UFIAddCommentActionType","UFICentralUpdates","UFICommentActionType","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c("UFICentralUpdates").subscribe("actor-changed",function(l,m){c("UFIDispatcherBase").dispatch({type:"PRIVATE_ACTOR_CHANGED",instanceID:true,ftentidentifier:true})})}j.prototype.getInitialState=function(){return{}};j.prototype.getForInstance=function(k){return this.getState()[k]||null};j.prototype.reduce=function(k,l){var m;switch(l.type){case"PRIVATE_ACTOR_CHANGED":return{};case c("UFIAddCommentActionType").CANCEL:case c("UFIAddCommentActionType").SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c("UFICommentActionType").EDIT:return babelHelpers["extends"]({},k,(m={},m[l.instanceID]=l.comment.id,m))}return k};f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("CommentApprovalsResponsibleUserAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({APPEALED:"APPEALED",SECURED_ACCOUNT:"SECURED_ACCOUNT"})}),null);
__d("LiveWWWFeedbackTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:LiveWWWFeedbackLoggerConfig",this.$LiveWWWFeedbackTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:LiveWWWFeedbackLoggerConfig",this.$LiveWWWFeedbackTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$LiveWWWFeedbackTypedLogger1={};return this};h.prototype.updateData=function(j){this.$LiveWWWFeedbackTypedLogger1=babelHelpers["extends"]({},this.$LiveWWWFeedbackTypedLogger1,j);return this};h.prototype.setCommentID=function(j){this.$LiveWWWFeedbackTypedLogger1.comment_id=j;return this};h.prototype.setEvent=function(j){this.$LiveWWWFeedbackTypedLogger1.event=j;return this};h.prototype.setIsMSite=function(j){this.$LiveWWWFeedbackTypedLogger1.is_m_site=j;return this};h.prototype.setMechanism=function(j){this.$LiveWWWFeedbackTypedLogger1.mechanism=j;return this};h.prototype.setOriginatedLocally=function(j){this.$LiveWWWFeedbackTypedLogger1.originated_locally=j;return this};h.prototype.setRecipientID=function(j){this.$LiveWWWFeedbackTypedLogger1.recipient_id=j;return this};h.prototype.setTimeSinceSub=function(j){this.$LiveWWWFeedbackTypedLogger1.time_since_sub=j;return this};h.prototype.setUpdateType=function(j){this.$LiveWWWFeedbackTypedLogger1.update_type=j;return this};h.prototype.setVC=function(j){this.$LiveWWWFeedbackTypedLogger1.vc=j;return this};var i={comment_id:true,event:true,is_m_site:true,mechanism:true,originated_locally:true,recipient_id:true,time_since_sub:true,update_type:true,vc:true};f.exports=h}),null);
__d("UFIComments",["invariant","ClientIDs","CommentApprovalsResponsibleUserAction","ImmutableObject","LiveWWWFeedbackTypedLogger","UFICentralUpdates","UFIConstants","randomInt"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={},j={},k={};function l(H){return H in j?j[H]:H}function m(H,I){__p&&__p();H.forEach(function(J){__p&&__p();var K=J.ftentidentifier,L=c("UFIConstants").UFIPayloadSourceType,M=J.clientid,N=false,O=babelHelpers["extends"]({},J);if(M){delete O.clientid;N=c("ClientIDs").isExistingClientID(M);if(N&&j[M]){new(c("LiveWWWFeedbackTypedLogger"))().setEvent("update_view").setUpdateType("comment").setOriginatedLocally(true).setCommentID(J.id).log();return}}if(I===L.LIVE_SEND||I===c("UFIConstants").UFIPayloadSourceType.STREAMING||I===L.USER_ACTION||I===L.ENDPOINT_ADD_COMMENT||I===L.ENDPOINT_EDIT_COMMENT)O.isunseen=true;if(I===c("UFIConstants").UFIPayloadSourceType.LIVE_SEND||I===c("UFIConstants").UFIPayloadSourceType.STREAMING)O.islive=true;if(I===L.ENDPOINT_COMMENT_FETCH||I===L.ENDPOINT_ID_COMMENT_FETCH)O.fromfetch=true;if(N&&i[M]){O.ufiinstanceid=i[M].ufiinstanceid;j[M]=J.id;k[J.id]=M;i[J.id]=i[M];delete i[M];c("UFICentralUpdates").didUpdateComment(M)}G.setComment(J.id,new(c("ImmutableObject"))(O));c("UFICentralUpdates").didUpdateComment(J.id);c("UFICentralUpdates").didUpdateFeedback(K)})}function n(H,I){__p&&__p();for(var J=0;J<H.length;J++){var K=H[J];switch(K.actiontype){case c("UFIConstants").UFIActionType.LIKE_ACTION:if(G.getComment(K.entidentifier))o(K.clientid,K.entidentifier,K.hasviewerliked,K.likecount,K.reactiondata,I);break;case c("UFIConstants").UFIActionType.COMMENT_LIKE:o(K.clientid,K.commentid,K.viewerliked,K.likecount,K.reactiondata,I);break;case c("UFIConstants").UFIActionType.MUTE_MEMBER:p(K);break;case c("UFIConstants").UFIActionType.REACTION:if(G.getComment(K.entidentifier))q(K.entidentifier,K);break;case c("UFIConstants").UFIActionType.COMMENT_REACTION:q(K.commentid,K);break;case c("UFIConstants").UFIActionType.DELETE_COMMENT:u(K);break;case c("UFIConstants").UFIActionType.LIVE_DELETE_COMMENT:v(K);break;case c("UFIConstants").UFIActionType.CHANGE_ACCEPTED_ANSWER:w(K);break;case c("UFIConstants").UFIActionType.REMOVE_PREVIEW:x(K);break;case c("UFIConstants").UFIActionType.COMMENT_SET_SPAM:y(K);break;case c("UFIConstants").UFIActionType.COMMENT_KEEP_SPAM:z(K);break;case c("UFIConstants").UFIActionType.COMMENT_APPEAL_SPAM:A(K);break;case c("UFIConstants").UFIActionType.COMMENT_SECURE_ACCOUNT:B(K);break;case c("UFIConstants").UFIActionType.CONFIRM_COMMENT_REMOVAL:C(K);break;case c("UFIConstants").UFIActionType.TRANSLATE_COMMENT:s(K);break;case c("UFIConstants").UFIActionType.COMMENT_LIKECOUNT_UPDATE:r(K);break;case c("UFIConstants").UFIActionType.UPDATE_CONSTITUENT_TITLE:E(K);break}}}function o(H,I,J,K,L,M){__p&&__p();var N=G.getComment(I);if(N){var O={},P=H&&c("ClientIDs").isExistingClientID(H);if(!P){O.hasviewerliked=J;O.likecount=K;if(L){O.reactioncount=L.reactioncount;O.reactioncountmap=L.reactioncountmap;O.reactioncountreduced=L.reactioncountreduced;O.viewerreaction=L.viewerreaction}}if(M===c("UFIConstants").UFIPayloadSourceType.LIVE_SEND||M===c("UFIConstants").UFIPayloadSourceType.STREAMING)new(c("LiveWWWFeedbackTypedLogger"))().setEvent("update_view").setUpdateType("comment_like").setOriginatedLocally(Boolean(P)).setCommentID(I).log();O.likeconfirmhash=c("randomInt")(0,1024);F(I,O)}}function p(H){for(var I in i){var J=i[I];if(J.author===H.authorid){var K={};K.ismuted=H.shouldmute;F(I,K)}}}function q(H,I){__p&&__p();var J=G.getComment(H);if(J){var K={};if(I.clientid&&c("ClientIDs").isExistingClientID(I.clientid)&&I.viewerreaction!==J.viewerreaction)return;K.hasviewerliked=I.hasviewerliked;K.likecount=I.likecount;K.reactioncount=I.reactioncount;K.reactioncountmap=I.reactioncountmap;K.reactioncountreduced=I.reactioncountreduced;K.viewerreaction=I.viewerreaction;F(H,K)}}function r(H){var I=G.getComment(H.commentid);if(I&&H.hasviewerliked===I.hasviewerliked){var J={likecount:H.likecount,likeconfirmhash:c("randomInt")(0,1024)};F(H.commentid,J)}}function s(H){var I=H.commentid,J=G.getComment(I);if(J){var K={translationdata:H.translationdata};F(I,K)}}function t(H){var I={reportLink:H.reportLink,commenterIsFOF:H.commenterIsFOF,userIsMinor:H.userIsMinor,giveFeedbackLink:H.giveFeedbackLink,reportOptionsLink:H.reportOptionsLink};return I}function u(H){var I=G.getComment(H.commentid);if(I)D(I,c("UFIConstants").UFIStatus.DELETED)}function v(H){var I=G.getComment(H.commentid);if(I&&I.status!==c("UFIConstants").UFIStatus.DELETED)D(I,c("UFIConstants").UFIStatus.LIVE_DELETED)}function w(H){F(H.commentid,{postacceptedanswer:H.isaccepted?H.commentid:null})}function x(H){F(H.commentid,{attachment:null})}function y(H){var I=G.getComment(H.commentid),J=H.shouldHideAsSpam?c("UFIConstants").UFIStatus.SPAM_DISPLAY:null;if(I)D(I,J)}function z(H){var I=G.getComment(H.commentid);if(I)F(I.id,{needsApproval:false,isApproved:true})}function A(H){var I=G.getComment(H.commentid);if(I)F(I.id,{appealStatus:c("CommentApprovalsResponsibleUserAction").APPEALED,canAppeal:false,canSecure:false})}function B(H){var I=G.getComment(H.commentid);if(I)F(I.id,{appealStatus:c("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT,canAppeal:false,canSecure:false})}function C(H){F(H.commentid,t(H))}function D(H,I){F(H.id,{priorstatus:H.status,status:I})}function E(H){var I=G.getComment(H.commentid);if(I){var J={constituentTitle:H.constituentTitle,hasConstituentBadge:H.hasConstituentBadge};F(H.commentid,J)}}function F(H,I){var J=G.getComment(H)||new(c("ImmutableObject"))({});G.setComment(H,c("ImmutableObject").set(J,I));c("UFICentralUpdates").didUpdateComment(J.id);c("UFICentralUpdates").didUpdateFeedback(J.ftentidentifier)}var G={getRenderKey:function H(I){return"comment"+(I in k?k[I]:I)},getComment:function H(I){if(I===c("UFIConstants").unavailableCommentKey)return null;return i[l(I)]},setComment:function H(I,J){J instanceof c("ImmutableObject")||h(0);i[l(I)]=J},resetComments:function H(I){for(var J in I)delete i[l(J)]},getCommentsForFTEntIdentifier:function H(I){var J=[];for(var K in i){var L=i[K];if(L.ftentidentifier==I)J.push(L)}return J}};c("UFICentralUpdates").subscribe("update-comments",function(H,I){if(I.comments&&I.comments.length)m(I.comments,I.payloadsource);if(I.pinnedcomments&&I.pinnedcomments.length)m(I.pinnedcomments,I.payloadsource)});c("UFICentralUpdates").subscribe("update-actions",function(H,I){if(I.actions&&I.actions.length)n(I.actions,I.payloadsource)});f.exports=G}),22);
__d("UFIFeedbackMutator",["ClientIDs","LiveWWWFeedbackTypedLogger","UFIConstants","UFIReactionTypes","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UFIConstants").UFIActionType,i=c("UFIConstants").UFIPayloadSourceType,j={getHandlerForAction:function k(l){var m;return(m={},m[h.LIKE_ACTION]=j.handleLike,m[h.SUBSCRIBE_ACTION]=j.handleSubscribe,m[h.DISABLE_COMMENTS]=j.handleCommentsDisabled,m[h.REACTION]=j.handleReaction,m[h.UPDATE_CONSTITUENT_TITLE]=j.handleUpdateConstituentTitle,m)[l.actiontype]||c("emptyFunction")},handleLike:function k(l,m,n){__p&&__p();var o=m.clientid&&c("ClientIDs").isExistingClientID(m.clientid);if(n===i.LIVE_SEND||n===i.STREAMING)new(c("LiveWWWFeedbackTypedLogger"))().updateData({event:"update_view",update_type:"like",originated_locally:Boolean(o)}).log();if(o&&m.hasviewerliked!=l.hasviewerliked)return null;l.likecount=m.likecount;l.likesentences=m.likesentences;if(m.actorid==l.actorforpost)l.hasviewerliked=m.hasviewerliked;else{l.likesentences.isunseen=true;if(m.hasviewerliked!=l.hasviewerliked){l.likecount+=l.hasviewerliked?1:-1;l.likesentences={current:m.likesentences.alternate,alternate:m.likesentences.current,isunseen:l.likesentences.isunseen}}}return l},handleSubscribe:function k(l,m,n){if(m.clientid&&c("ClientIDs").isExistingClientID(m.clientid)&&m.hasviewersubscribed!=l.hasviewersubscribed)return null;if(m.actorid==l.actorforpost){l.hasviewersubscribed=m.hasviewersubscribed;return l}return l},handleCommentsDisabled:function k(l,m,n){l.cancomment=m.cancomment;l.arecommentsdisabled=m.arecommentsdisabled;l.commentdisablednotice=m.commentdisablednotice;return l},handleReaction:function k(l,m,n){__p&&__p();if(m.clientid&&c("ClientIDs").isExistingClientID(m.clientid)&&m.viewerreaction!==l.viewerreaction)return null;if(l.reactors&&l.actorforpost==m.actorid&&l.viewerreaction!=m.viewerreaction)if(m.viewerreaction==c("UFIReactionTypes").NONE)l.reactors=l.reactors.slice(1);else if(l.viewerreaction==c("UFIReactionTypes").NONE)l.reactors.unshift({name:l.ownname,profilepicsrc:l.ownprofpic,reaction:m.viewerreaction});else l.reactors[0].reaction=m.viewerreaction;if(l.actorforpost==m.actorid||l.viewerreaction==m.viewerreaction){l.reactioncount=m.reactioncount;l.reactioncountmap=m.reactioncountmap;l.reactioncountreduced=m.reactioncountreduced;l.reactionsentences=m.reactionsentences;l.reactorids=m.reactorids;l.userreactions=m.userreactions;l.viewerreaction=m.viewerreaction}return l},handleUpdateConstituentTitle:function k(l,m,n){l.constituentbanneruri=m.constituentbanneruri;return l}};f.exports=j}),null);
__d("UFIFeedbackTargets",["KeyedCallbackManager","UFICentralUpdates","UFIFeedbackMutator"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("KeyedCallbackManager"))();function i(l){var m;if(!l)return;var n=babelHelpers["extends"]({},l);delete n.commentlist;delete n.commentcount;c("UFICentralUpdates").didUpdateFeedback(l.entidentifier);h.addResourcesAndExecute((m={},m[l.entidentifier]=n,m))}function j(l,m){__p&&__p();for(var n=0;n<l.length;n++){var o=l[n];o.arecommentsdisabled=!!o.arecommentsdisabled;o.cancomment=!!o.cancomment;o.hasviewerliked=!!o.hasviewerliked;o.hasviewersubscribed=!!o.hasviewersubscribed;o.likecount=o.likecount||0;var p=h.getResource(o.entidentifier);if(!p)break;var q=c("UFIFeedbackMutator").getHandlerForAction(o);i(q(p,o,m))}}var k={getFeedbackTarget:function l(m,n){var o=h.executeOrEnqueue(m,n),p=h.getUnavailableResources(o);p.length;return o},getFeedbackTargetIfExists:function l(m){return h.getResource(m)||null},unsubscribe:function l(m){h.unsubscribe(m)}};c("UFICentralUpdates").subscribe("update-feedback",function(l,m){var n=m.feedbacktarget?m.feedbacktarget:m.feedbacktargets&&m.feedbacktargets[0];if(n)i(n)});c("UFICentralUpdates").subscribe("update-actions",function(l,m){if(m.actions&&m.actions.length)j(m.actions,m.payloadsource)});f.exports=k}),22);
__d("UFILivePinnedCommentStore",["FluxReduceStore","UFIComments","UFIDispatcherBase","UFIFeedbackTargets","UFIStoryActionType","areEqual"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c("UFIStoryActionType").LIVE_PIN_COMMENT:case c("UFIStoryActionType").LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers["extends"]({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k}};j.prototype.areEqual=function(k,l){return c("areEqual")(k,l)};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c("UFIFeedbackTargets").getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null}return l.commentID||null};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(!l)return null;var m=c("UFIComments").getComment(l);return m?m.author||null:null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIRootRegistry",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={},j={},k=[],l={registerController:function m(n,o,p,q){h[n]=q;i[p]=[].concat(i[p]||[],[o]);j[o]=p},registerSnowliftID:function m(n){k.push(n)},isSnowliftNode:function m(n){return k.indexOf(n)>=0},getInstanceIDFromFTEntIdentifier:function m(n){return i[n]||null},getFTEntIdentifierFromInstanceID:function m(n){return j[n]||null},cleanupInstance:function m(n){var o=j[n],p=i[o];if(p&&p.includes(n)){i[o]=p.filter(function(q){return q!=n});if(i[o].length==0)delete i[o]}delete j[n]},cleanupSnowliftNodes:function m(){k.forEach(function(n){return h[n]&&h[n]()});h={};k=[]}};f.exports=l}),null);
__d("UFIVisibility",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({VISIBLE:"visible",HIDDEN:"hidden"});f.exports=h}),null);
__d("UFICommentVisibilityStore",["invariant","FluxReduceStore","UFICommentActionType","UFIComments","UFIDispatcherBase","UFIInstanceActionType","UFILivePinnedCommentStore","UFIRootRegistry","UFIVisibility","filterObject"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+"-"+q+(r?"-P":"");return p}function l(p,q){return p===q||p.startsWith(q+"-")}function m(p){var q=c("UFIRootRegistry").getInstanceIDFromFTEntIdentifier(p);return q?q:[]}function n(p){return{instanceid:p}}i=babelHelpers.inherits(o,c("FluxReduceStore"));j=i&&i.prototype;o.prototype.getInitialState=function(){return{}};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(Object.prototype.hasOwnProperty.call(p,s))return p[s];return c("UFIVisibility").HIDDEN};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return this.getVisibility(this.getState(),q)===c("UFIVisibility").VISIBLE};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r)}.bind(this))};o.prototype.reduce=function(p,q){__p&&__p();var r;switch(q.type){case c("UFICommentActionType").UNMOUNTED:var s=babelHelpers["extends"]({},p);delete s[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return s;case c("UFICommentActionType").CHANGE_VISIBILITY:return babelHelpers["extends"]({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c("UFIInstanceActionType").CHANGE_VISIBILITY:var t=c("UFIRootRegistry").getFTEntIdentifierFromInstanceID(q.instanceID),u=c("UFIComments").getCommentsForFTEntIdentifier(t);q.type===c("UFIInstanceActionType").CHANGE_VISIBILITY||h(0);var v=q.visibility;if(u){var w,x=u.reduce(function(C,D){C[k(q.instanceID,D.fbid,D.fbid?false:null)]=v;return C},{});if(t){var y=c("UFILivePinnedCommentStore").getPinnedCommentID(t);if(y){var z=c("UFIComments").getComment(y);if(z)x[k(q.instanceID,z.fbid,true)]=v}}return babelHelpers["extends"]({},p,(w={},w[k(q.instanceID)]=q.visibility,w),x)}case c("UFIInstanceActionType").REMOVE:var A=q.instanceID,B=k(A);return c("filterObject")(p,function(C,D){return D!==B&&!l(D,A)})}return p};function o(){i.apply(this,arguments)}f.exports=new o(c("UFIDispatcherBase"))}),null);
__d("UFICommercialBreakStore",["UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getValueFor=function(k){return!!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIInstanceActionType").TOGGLE_COMMERCIAL_BREAK:return k.inCommercial}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIInteractionStore",["UFIAddCommentActionType","UFICommentActionType","UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore","UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getValueFor=function(k){return!!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIAddCommentActionType").CHANGE_CONTENT:case c("UFIAddCommentActionType").SUBMIT_EDIT:case c("UFIAddCommentActionType").SUBMIT_NEW:case c("UFICommentActionType").CHANGE_REACTION:case c("UFICommentActionType").EDIT:case c("UFICommentActionType").REMOVE:case c("UFICommentActionType").TOGGLE_LIKE:case c("UFICommentActionType").TOGGLE_MARK_AS_SPAM:case c("UFICommentActionType").TRANSLATE:case c("UFIInstanceActionType").CHANGE_ORDER_MODE:case c("UFIInstanceActionType").TOGGLE_COMMENTS:case c("UFIStoryActionType").PAGE_IN_COMMENTS:case c("UFIStoryActionType").SHOW_REPLIES:case c("UFIStoryActionType").TOGGLE_REPLIES:return true}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFILiveTypingStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c("UFIStoryActionType").FRIEND_TYPING:return"friend";case c("UFIStoryActionType").SOMEONE_TYPING:return"someone";case c("UFIStoryActionType").TYPING_STOPPED:return false;default:return null}};j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers["extends"]({},k,(n={},n[l.ftentidentifier]=m,n))}return k};j.prototype.isFriendTyping=function(k){return this.getState()[k]==="friend"};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFICentralUpdatesLocalCommentAdapter",["ClientIDs","FeedbackPayloadSourceType","UFICentralUpdates","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i={},j=(h={},h[c("FeedbackPayloadSourceType").USER_ACTION]=l,h[c("FeedbackPayloadSourceType").ENDPOINT_ADD_COMMENT]=m,h);function k(){return c("UFICentralUpdates").subscribe("update-comments",function(p,q){if(q.comments){var r=j[q.payloadsource];if(r)q.comments.forEach(r)}})}function l(p){if(!c("ClientIDs").isExistingClientID(p.id))return;i[p.id]=p.ufiinstanceid;c("UFIDispatcherBase").dispatch({type:"CENTRALUPDATES_ADDED_COMMENT",instanceID:p.ufiinstanceid,ftentidentifier:p.ftentidentifier,clientID:p.id})}function m(p){if(!c("ClientIDs").isExistingClientID(p.clientid))return;var q=i[p.clientid];delete i[p.clientid];if(!q)return;c("UFIDispatcherBase").dispatch({type:"CENTRALUPDATES_SAVED_COMMENT",instanceID:q,ftentidentifier:p.ftentidentifier,clientID:p.clientid,commentID:p.id})}var n=void 0,o={subscribeOnce:function p(){if(!n){n=k();return n}return null}};f.exports=o}),null);
__d("UFILocallyComposedCommentStore",["invariant","ClientIDs","FluxReduceStore","UFIAddCommentActionType","UFICentralUpdatesLocalCommentAdapter","UFIDispatcherBase","setByPath"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;function k(m){return babelHelpers["extends"]({},m)}i=babelHelpers.inherits(l,c("FluxReduceStore"));j=i&&i.prototype;function l(m){j.constructor.call(this,m);var n=c("UFICentralUpdatesLocalCommentAdapter").subscribeOnce()}l.prototype.getInitialState=function(){return{}};l.prototype.getStateForInstance=function(m){return m?this.getState()[m]||{}:{}};l.prototype.reduce=function(m,n){__p&&__p();switch(n.type){case"CENTRALUPDATES_ADDED_COMMENT":c("ClientIDs").isExistingClientID(n.clientID)||h(0);m=k(m);c("setByPath")(m,[n.instanceID,n.clientID],true);return m;case"CENTRALUPDATES_SAVED_COMMENT":c("ClientIDs").isExistingClientID(n.clientID)||h(0);m=k(m);c("setByPath")(m,[n.instanceID,n.commentID],true);delete m[n.instanceID][n.clientID];return m;case c("UFIAddCommentActionType").SUBMIT_EDIT:m=k(m);c("setByPath")(m,[n.instanceID,n.comment.id],true);return m}return m};f.exports=new l(c("UFIDispatcherBase"))}),null);
__d("UFIPlayLiveVODHighlightsStore",["UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getValueFor=function(k){return!!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIInstanceActionType").PLAY_LIVE_VOD_HIGHLIGHTS:return k.playingLiveVODHighlights}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIActionTypes",["UFIInstanceActionType","UFIStoryActionType","UFIAddCommentActionType","UFICommentActionType"],(function a(b,c,d,e,f,g){"use strict";var h={INSTANCE:c("UFIInstanceActionType"),STORY:c("UFIStoryActionType"),ADD_COMMENT:c("UFIAddCommentActionType"),COMMENT:c("UFICommentActionType")};f.exports=h}),null);
__d("UFIReactionPendingRequestsStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;function j(o){return o+"-comment"}function k(o){return o+"-story"}function l(o,p){var q;return babelHelpers["extends"]({},o,(q={},q[p]=(o[p]||0)+1,q))}function m(o,p){var q;return babelHelpers["extends"]({},o,(q={},q[p]=(o[p]||0)-1,q))}h=babelHelpers.inherits(n,c("FluxReduceStore"));i=h&&h.prototype;n.prototype.getInitialState=function(){return{}};n.prototype.reduce=function(o,p){switch(p.type){case c("UFIActionTypes").STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c("UFIActionTypes").COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:case c("UFIActionTypes").STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c("UFIActionTypes").COMMENT.CHANGE_REACTION_FAILURE:case c("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid))}return o};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0};function n(){h.apply(this,arguments)}f.exports=new n(c("UFIDispatcherBase"))}),null);
__d("UFIReactionSyncStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;function j(m){return m+"-comment"}function k(m){return m+"-story"}h=babelHelpers.inherits(l,c("FluxReduceStore"));i=h&&h.prototype;l.prototype.getInitialState=function(){return{}};l.prototype.reduce=function(m,n){__p&&__p();var o,p,q;switch(n.type){case c("UFIActionTypes").INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u},{});return babelHelpers["extends"]({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)]};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)]};function l(){h.apply(this,arguments)}f.exports=new l(c("UFIDispatcherBase"))}),null);
__d("UFISharedDispatcher",["UFIDispatcherBase","UFIFeedbackStore","UFIAcceptedAnswerStore","UFICommentEditIDStore","UFICommentVisibilityStore","UFICommercialBreakStore","UFIComposerIsTypingStore","UFIInteractionStore","UFILivePinnedCommentStore","UFILiveTypingStore","UFILocallyComposedCommentStore","UFIOrderingModeStore","UFIReactionPendingRequestsStore","UFIReactionSyncStore","UFISpamStore","UFIPlayLiveVODHighlightsStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();c("UFIFeedbackStore");c("UFIAcceptedAnswerStore");c("UFICommentEditIDStore");c("UFICommentVisibilityStore");c("UFICommercialBreakStore");c("UFIComposerIsTypingStore");c("UFIFeedbackStore");c("UFIInteractionStore");c("UFILivePinnedCommentStore");c("UFILiveTypingStore");c("UFILocallyComposedCommentStore");c("UFIOrderingModeStore");c("UFIReactionPendingRequestsStore");c("UFIReactionSyncStore");c("UFISpamStore");c("UFIPlayLiveVODHighlightsStore");f.exports=c("UFIDispatcherBase")}),null);
__d("UFICommentAction",["UFICommentActionType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={changeReaction:function i(j,k,l,m){return{type:c("UFICommentActionType").CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m}},changeReactionSuccess:function i(j,k,l){return{type:c("UFICommentActionType").CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},changeReactionFailure:function i(j,k,l){return{type:c("UFICommentActionType").CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},mounted:function i(j,k){return{type:c("UFICommentActionType").MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},unmounted:function i(j,k){return{type:c("UFICommentActionType").UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},changeVisibility:function i(j,k,l){return{type:c("UFICommentActionType").CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l}},edit:function i(j,k){return{type:c("UFICommentActionType").EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},remove:function i(j,k,l,m){return{type:c("UFICommentActionType").REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},delete_comment_and_remove_commenter:function i(j,k,l,m){return{type:c("UFICommentActionType").DELETE_COMMENT_AND_REMOVE_COMMENTER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},mute_member:function i(j,k,l,m){return{type:c("UFICommentActionType").MUTE_MEMBER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},toggle_text_delights:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_TEXT_DELIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},removePreview:function i(j,k,l){return{type:c("UFICommentActionType").REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},toggleLike:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l}},translate:function i(j,k,l){return{type:c("UFICommentActionType").TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l}},markAsSpam:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l}},markAsNotSpam:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l}},inlineBan:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l}},undoInlineBan:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l}},embed:function i(j,k){return{type:c("UFICommentActionType").EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},manageConstituentBadge:function i(j,k){return{type:c("UFICommentActionType").MANAGE_CONSTITUENT_BADGE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},keepSpam:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_KEEP_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},appealSpam:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_APPEAL_SPAM,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}},secureAccount:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_SECURE_ACCOUNT,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}}};f.exports=h}),null);
__d("UFIReactionsUtils",[],(function a(b,c,d,e,f,g){__p&&__p();var h={getReactionData:function i(j,k,l,m){__p&&__p();k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){l&&o.unshift(l);q=1}}else if(p>-1){o.splice(p,1);q=-1}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m)s=m(r);else s=r.toString();var t=j.reactioncountmap||{},u=void 0,v=j.viewerreaction;if(v&&t[v]){t[v]["default"]=Math.max((t[v]["default"]||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]["default"].toString()}if(n&&t[k]){t[k]["default"]=(t[k]["default"]||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]["default"].toString()}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(l)if(n)w[l]=k;else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?"alternate":"current"],alternate:j.reactionsentences[y?"current":"alternate"]}}return{reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k}},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={"default":m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count}}return k}};f.exports=h}),null);
__d("UFIStoryAction",["UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={changeAcceptedAnswer:function i(j,k,l){return{type:c("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l}},commentsArrived:function i(j,k,l,m){return{type:c("UFIStoryActionType").COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m}},pageInComments:function i(j,k,l,m){return{type:c("UFIStoryActionType").PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m}},showComments:function i(j){return{type:c("UFIStoryActionType").SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},showReplies:function i(j,k,l){return{type:c("UFIStoryActionType").SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l}},spamFetched:function i(j,k,l,m){return{type:c("UFIStoryActionType").SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m}},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return{type:c("UFIStoryActionType").CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n}},changeReactionSuccess:function i(j,k){return{type:c("UFIStoryActionType").CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},changeReactionFailure:function i(j,k){return{type:c("UFIStoryActionType").CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},toggleReplies:function i(j,k){return{type:c("UFIStoryActionType").TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k}},friendTyping:function i(j){return{type:c("UFIStoryActionType").FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},someoneTyping:function i(j){return{type:c("UFIStoryActionType").SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},typingStopped:function i(j){return{type:c("UFIStoryActionType").TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return{type:c("UFIStoryActionType").LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l}},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return{type:c("UFIStoryActionType").LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k}}};f.exports=h}),null);
__d("UFIUserActionUtils",["Nectar","TrackingNodes","collectDataAttributes","gkx"],(function a(b,c,d,e,f,g){__p&&__p();var h={trackingData:function j(k){if(!k)return{ft:{}};var j={ft:c("collectDataAttributes")(k,["ft"]).ft};c("Nectar").addModuleData(j,k);if(c("gkx")("AT7CIllQs5vUP4A0v4SO9HVcFFh0Ii9VCv9l4cQX-5tVrl409OQPBI9KeKPxfSR6LwVFoWp0EUZ1__ITSQvSE6WAivJJgTZl90GSJyfeP6-0FA")&&i(j.ft.tn))return{};return j}};function i(j){if(j){var k=c("TrackingNodes").parseTrackingNodeString(j);for(var l=0;l<k.length;l++){var m=k[l][0];switch(m){case c("TrackingNodes").types.COMMENT:return true}}}return false}f.exports=h}),null);
__d("UFIVideoPlayerRegistry",["EventEmitter","Map","Set","VideoPlayerReason","ViewportBounds","destroyOnUnload","getOrCreateDOMID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("EventEmitter"))(),i=new(c("Map"))(),j=new(c("Map"))(),k=new(c("Map"))(),l=new(c("Map"))(),m=new(c("Set"))(),n=new(c("Map"))();c("destroyOnUnload")(function(){h.removeAllListeners();i.clear();j.clear();k.clear();l.clear();m.clear()});function o(s){var t=s,u=[];while(t){u.unshift(t);t=t.parentElement}return u}function p(s,t){__p&&__p();var u=o(s),v=null,w=null;t.forEach(function(x){var y=x[0],z=x[1],A=o(y);for(var B=0;B<u.length;++B)if(u[B]!==A[B]){if(w===null||B>w){w=B;v=z}break}});return v}function q(s,t){__p&&__p();var u=o(s),v=null,w=null;t.forEach(function(x){var y=x[0],z=x[1],A=o(y);for(var B=0;B<u.length;++B)if(u[B]!==A[B]){if(w===null||B>w){w=B;v=z}break}});return v}var r={registerVideoPlayerController:function s(t){__p&&__p();var u=t.getVideoID(),v=l.get(u);if(v)v.push(t);else{v=[t];l.set(u,v);k["delete"](u)}m.forEach(function(x){return x()});var w=i.get(u);if(!w)return;w.forEach(function(x){return this._associateUFIController(x,u)}.bind(this))},addOnRegisterListener:function s(t){m.add(t)},removeOnRegisterListener:function s(t){m["delete"](t)},getAvailableVideoPlayerController:function s(t){return j.get(t)},seekAvailableVideoPlayerController:function s(t,u){var v=r.getAvailableVideoPlayerController(t);if(!v)return;if(["ready","playing","paused","finished"].includes(v.getState())){v.pause(c("VideoPlayerReason").SEEK);v.seek(u);v.play(c("VideoPlayerReason").SEEK)}},scrollToAvailableVideo:function s(t){var u=r.getAvailableVideoPlayerController(t);if(!u)return;var v=c("ViewportBounds").getElementPosition(u.getRootNode());window.scroll(0,v.y)},setAvailableVideoPlayerControllerSphericalViewport:function s(t,u){var v=r.getAvailableVideoPlayerController(t);if(!v)return;v.emit("SphericalVideoViewportTagComment/click",u)},getAvailableVideoPlayerControllerForElement:function s(t,u){if(!t)return null;var v=k.get(u)||new(c("Map"))(),w=c("getOrCreateDOMID")(t),x=v.get(w)||this._findVideoPlayerControllerForElement(t,u);v.set(w,x);k.set(u,v);return x},getAvailableVideoPlayerControllerTimeForElement:function s(t,u){if(!t)return null;var v=r.getAvailableVideoPlayerControllerForElement(t,u);if(!v)return null;var w=v.getCurrentTimePosition();if(w>=0)return Math.floor(w);return null},getAvailableVideoPlayerControllerTime:function s(t){var u=r.getAvailableVideoPlayerController(t);if(!u)return null;var v=u.getCurrentTimePosition();if(v>=0)return Math.floor(v);return null},registerUFIController:function s(t,u,v){__p&&__p();var w=t.getInstanceID(),x=t.getFluentContentToken();if(!x)return;var y=i.get(x);if(y)y.push(t);else{y=[t];i.set(x,y)}h.addListener(w+"/register",u);h.addListener(w+"/unregister",v);this._associateUFIController(t,x)},getAvailableUFIController:function s(t){__p&&__p();var u=n.get(t);if(u)return u;var v=i.get(t.getVideoID());if(!v)return null;if(v.length===1)u=v[0];else u=q(t.getRootNode(),v.map(function(x){return[x.getRootNode(),x]}));if(u){var w=this._findVideoPlayerControllerForElement(u.getRootNode(),t.getVideoID());if(w!==t)return null;n.set(t,u)}return u},_findVideoPlayerControllerForElement:function s(t,u){var v=l.get(u);if(!v)return null;if(v.length===1)return v[0];return p(t,v.filter(function(w){return!w.isState("destroyed")}).map(function(w){return[w.getRootNode(),w]}))},_associateUFIController:function s(t,u){__p&&__p();var v=t.getInstanceID(),w=this._findVideoPlayerControllerForElement(t.getRootNode(),u);if(!w||w.isState("destroyed"))return;var x=j.get(v);if(x){if(!x.isState("destroyed")&&c("getOrCreateDOMID")(x.getRootNode())===c("getOrCreateDOMID")(w.getRootNode()))return;h.emit(v+"/unregister")}j.set(v,w);h.emit(v+"/register",w)}};f.exports=r}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/reaction/",{reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/reaction/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:false},is_comment:{type:"Bool",defaultValue:false},is_permalink:{type:"Bool",defaultValue:false},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}})}),null);
__d("UFIReactionUserActions",["ActorURI","AsyncResponse","ChannelClientID","ClientIDs","MercuryServerDispatcher","NumberFormat","QE2Logger","UFICentralUpdates","UFICommentAction","UFIComments","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionPendingRequestsStore","UFIReactionsUtils","UFIReactionSyncStore","UFIReactionTypes","UFISharedDispatcher","UFIStoryAction","UFIUserActionUtils","UFIVideoPlayerRegistry","XUFICommentReactionController","XUFIReactionController","emptyFunction","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={changeReaction:function z(A,B,C,D){__p&&__p();var E=arguments.length<=4||arguments[4]===undefined?null:arguments[4],F=arguments.length<=5||arguments[5]===undefined?null:arguments[5];c("UFIFeedbackTargets").getFeedbackTarget(A,function(G){__p&&__p();var H,I=w(G,B);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:I});var J=c("UFIUserActionUtils").trackingData(D),K={};K[c("ActorURI").PARAMETER_ACTOR]=G.actorforpost;var L=babelHelpers["extends"]({client_id:c("ClientIDs").getNewClientID(),ft_ent_identifier:A,reaction_type:B,root_id:C.rootid,session_id:c("ChannelClientID").getID(),source:C.source,feedback_referrer:C.feedbackReferrer,instance_id:C.instanceid},K,J);if(C.fluentContentToken)(function(){__p&&__p();var M=C.fluentContentToken,N=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(D,M);if(N&&N.isSpherical())L.video_playback_timestamp=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(D,M);if(C.isLiveVOD)L.on_demand_content_time_offset=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(D,M);else if(C.islivestreaming)L.live_content_time_offset=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(D,M);if(N&&N.isSpherical())c("ifRequired")("SphericalViewportControlStore",function(O){var P=O.getOrientation(N.getVideoPlayerID());if(P)if(E!==null&&F!==null){L.spherical_yaw=E;L.spherical_pitch=F}else{L.spherical_pitch=Math.round(P.pitch);L.spherical_yaw=Math.round(P.yaw)}},c("emptyFunction")())})();c("MercuryServerDispatcher").trySend(c("XUFIReactionController").getURIBuilder().getURI(),L)})},changeCommentReaction:function z(A,B,C,D){var E=c("UFIComments").getComment(A);if(E&&E.__typename==="saved"&&E.viewerreaction!=B)c("UFIFeedbackTargets").getFeedbackTarget(E.ftentidentifier,function(F){var G=c("UFIUserActionUtils").trackingData(D),H=v(E,F,B);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:H});var I={};I[c("ActorURI").PARAMETER_ACTOR]=F.actorforpost;c("MercuryServerDispatcher").trySend(c("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({comment_id:A,legacy_id:E.legacyid,reaction_type:B,ft_ent_identifier:E.ftentidentifier,source:C.source,instance_id:C.instanceid,client_id:c("ClientIDs").getNewClientID(),session_id:c("ChannelClientID").getID()},G,I))})}},i={},j=c("XUFIReactionController").getURIBuilder().getURI();i[j]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:r,handler:q};var k=c("XUFICommentReactionController").getURIBuilder().getURI();i[k]={mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c("MercuryServerDispatcher").registerEndpoints(i);function l(z,A){return z&&z.ft_ent_identifier==A.ft_ent_identifier&&z.comment_id==A.comment_id}function m(z,A){return A}var n="feedback_reactions_www_rollback_universe";function o(){c("QE2Logger").logExposureForUser(n)}function p(z,A){var B=c("UFIReactionPendingRequestsStore").getPendingRequests(z);if(B>0)return;var C=c("UFIReactionSyncStore").getLastKnownReaction(z);if(A===C)return;c("UFIFeedbackTargets").getFeedbackTarget(z,function(D){var E=w(D,C);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:E})})}function q(z,A){var B=A.data,C=B.ft_ent_identifier,D=B.reaction_type;c("UFISharedDispatcher").dispatch(c("UFIStoryAction").changeReactionSuccess({instanceid:B.instance_id,ftentidentifier:C},D));c("setImmediate")(function(){return p(C,D)})}function r(z){__p&&__p();var A=z.request.data,B=A.ft_ent_identifier,C=A.reaction_type;o();var D=c("UFIConfig").reactionsHasReactionsRollback,E=c("UFIConfig").reactionsHasReactionsRetry;if(E&&!A.retry_attempt){c("MercuryServerDispatcher").trySend(c("XUFIReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},A,{retry_attempt:1}));return}c("UFISharedDispatcher").dispatch(c("UFIStoryAction").changeReactionFailure({instanceid:A.instance_id,ftentidentifier:B},C));if(D)c("setImmediate")(function(){return p(B,C)});c("AsyncResponse").defaultErrorHandler(z)}function s(z,A,B){var C=c("UFIReactionPendingRequestsStore").getPendingRequestsForComment(A.fbid);if(C>0)return;var D=c("UFIReactionSyncStore").getLastKnownCommentReaction(A.fbid);if(B===D)return;c("UFIFeedbackTargets").getFeedbackTarget(z,function(E){var F=v(A,E,D);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:F})})}function t(z,A){var B=A.data,C=B.ft_ent_identifier,D=B.reaction_type,E=c("UFIComments").getComment(B.comment_id);if(!E||E.__typename!=="saved")return;c("UFISharedDispatcher").dispatch(c("UFICommentAction").changeReactionSuccess({instanceid:B.instance_id,ftentidentifier:C},E,D));c("setImmediate")(function(){return s(C,E,D)})}function u(z){__p&&__p();var A=z.request.data,B=A.ft_ent_identifier,C=A.reaction_type,D=c("UFIComments").getComment(A.comment_id);if(!D)return;o();var E=c("UFIConfig").reactionsHasCommentReactionsRollback,F=c("UFIConfig").reactionsHasCommentReactionsRetry;if(F&&!A.retry_attempt){c("MercuryServerDispatcher").trySend(c("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},A,{retry_attempt:1}));return}if(D&&D.__typename==="saved"){c("UFISharedDispatcher").dispatch(c("UFICommentAction").changeReactionFailure({instanceid:A.instance_id,ftentidentifier:B},D,C));if(E)c("setImmediate")(function(){return s(B,D,C)})}c("AsyncResponse").defaultErrorHandler(z)}function v(z,A,B){var C=z.id,D=[y(z,B,C,A.supportedreactions||[],A.actorforpost)],E=B===c("UFIReactionTypes").LIKE;if(A.hasviewerliked!==E){var F=E?1:-1;D.push({commentid:C,actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:E,likecount:(z.likecount||0)+F})}return D}function w(z,A){var B=[x(z,A)],C=A!==c("UFIReactionTypes").NONE;if(z.hasviewerliked!==C){var D=C?1:-1;B.push({actiontype:c("UFIConstants").UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:C,likecount:(z.likecount||0)+D,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}})}return B}function x(z,A){return Object.assign({actiontype:c("UFIConstants").UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c("UFIReactionsUtils").getReactionData(z,A,z.actorforpost,c("NumberFormat").formatInteger))}function y(z,A,B,C,D){var E={};for(var F=0;F<C.length;F++){var G=C[F],H=z.reactioncountmap?z.reactioncountmap[G]:null;E[G]={"default":H?H["default"]:0,reduced:H?H.reduced:"0"}}var I=c("UFIReactionsUtils").getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:E,reactorids:z.viewerreaction?[D]:[]},A,D);return{actiontype:c("UFIConstants").UFIActionType.COMMENT_REACTION,commentid:B,hasviewerliked:!!A,likecount:I.reactioncountmap[1]["default"],reactioncount:I.reactioncount,reactioncountmap:I.reactioncountmap,reactioncountreduced:I.reactioncountreduced,viewerreaction:A}}f.exports=h}),null);
__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"Live",ON_DEMAND:"OnDemand"})}),null);
__d("UFIPagedCommentListImpl",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFICommentLogger","UFIConfig","UFIConstants","UFIFeedbackTargets"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new(c("KeyedCallbackManager"))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c("UFIFeedbackTargets").getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink}.bind(this))}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(!i)return;if(i.__typename==="local")this.$UFIPagedCommentListImpl1(i.id);else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){__p&&__p();var l=j&&c("ClientIDs").isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c("UFIConfig").logCommentPost)c("UFICommentLogger").logNewCommentReceived(j,Date.now())}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i])};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c("UFIConstants").unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};h.prototype.getComments=function(i,j,k,l){__p&&__p();var m=new Array(j).fill().map(function(s,t){return t+i}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k)}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j))}.bind(this))};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error("Tried to get nonexistent comment");l[o]=p}.bind(this));return this.commentsFromCommentIDs(l,k,j)};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return{}};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};h.prototype.getCommentCount=function(){return this.count};h.prototype.getDeletedCount=function(){return this.deletedCount};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount};h.prototype.getBasePermalink=function(){return this.basePermalink};h.prototype.buildCommentPermalink=function(i,j,k){return null};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i]};f.exports=h}),null);
__d("UFIReplyCommentListImpl",["ActorURI","JSLogger","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIPagedCommentListImpl","URI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("JSLogger").create("ufi_reply_comment_list");h=babelHelpers.inherits(k,c("UFIPagedCommentListImpl"));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n}k.prototype.fetchComments=function(l,m,n){if(c("UFIConfig").logCommentLoad)c("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c("ActorURI").PARAMETER_ACTOR]=this.actorID;c("MercuryServerDispatcher").trySend("/ajax/ufi/reply_fetch.php",o)};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c("UFIComments").getComment(l[m+p]);if(q)o[m+p]=q}return o};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true}c("UFIComments").resetComments(m);return l};k.prototype.getParentCommentID=function(){return this.parentCommentID};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split("_"),p=m;if(o.length===2)p=o[1];else j.error("Bad reply comment ID: "+this.getParentCommentID());return new(c("URI"))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString()};c("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/reply_fetch.php":{mode:c("MercuryServerDispatcher").IMMEDIATE}});f.exports=k}),null);
__d("UFIReplyCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentListImpl","getObjectValues"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new(c("UFIReplyCommentListImpl"))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o}return h[m][n]},getReplyListsForParentCommentID:function k(l){return c("getObjectValues")(h[l]||{})},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n}};function j(k){var l=c("UFIComments").getComment(k.commentid);if(!l)return;var m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c("UFIConstants").UFIStatus.DELETED&&l.status!==c("UFIConstants").UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m)})}c("UFICentralUpdates").subscribe("update-actions",function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c("UFIConstants").UFIActionType.DELETE_COMMENT:j(n);break}}});c("UFICentralUpdates").subscribe("update-comment-lists",function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count)}});c("UFICentralUpdates").subscribe("update-comments",function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})})});f.exports=i}),22);
__d("UFIToplevelPagedCommentListImpl",["ActorURI","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIOrderingModeStore","UFIPagedCommentListImpl","URI","WebCommentViewOption"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("UFIPagedCommentListImpl"));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c("UFIOrderingModeStore").isInverted(l);this.orderingMode=l;this.clientHasAll=false}j.prototype.fetchComments=function(k,l,m){if(c("UFIConfig").logCommentLoad)c("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+"":null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c("WebCommentViewOption").RECENT_ACTIVITY||this.orderingMode!==c("WebCommentViewOption").RANKED_THREADED||this.orderingMode!==c("WebCommentViewOption").FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c("ActorURI").PARAMETER_ACTOR]=this.actorID;c("MercuryServerDispatcher").trySend("/ajax/ufi/comment_fetch.php",n)};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c("UFIComments").getComment(k[r]);if(s)n[l+q]=s}return n};j.prototype.getOrderingMode=function(){return this.orderingMode};j.prototype.setClientHasAll=function(k){this.clientHasAll=k};j.prototype.getClientHasAll=function(){return this.clientHasAll};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return new(c("URI"))(this.basePermalink).addQueryData({comment_id:l}).toString()};c("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/comment_fetch.php":{mode:c("MercuryServerDispatcher").IMMEDIATE}});f.exports=j}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"live",ON_DEMAND:"on_demand"})}),null);
__d("UFIToplevelStreamedCommentList",["invariant","ClientIDs","Map","UFICentralUpdates","UFICommentLogger","UFIComments","UFIConfig","UFIConstants","UFIRange","UFIStreamingStateType"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};i.prototype.getClientHasAll=function(){return false};i.prototype.getActualCommentCount=function(){return this.commentIDs.length};i.prototype.getCommentCount=function(){return this.totalCommentCount};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()};i.prototype.getDeletedCount=function(){return this.deletedCount};i.prototype.getPermalinkForComment=function(j){return""};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new(c("UFIRange"))(j,k),l))};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c("UFIComments").getComment(this.commentIDs[q]);if(r)o[p]=r}return o};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c("ClientIDs").isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c("UFIConfig").logCommentPost)c("UFICommentLogger").logNewCommentReceived(l,Date.now())}}else if(k||j.__typename==="local"){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c("UFIStreamingStateType").ON_DEMAND&&!j.isAnnouncement&&!j.tipOptionIndex)this.totalCommentCount+=1}if(this.commentIDs.length>50)this.commentIDs.shift();c("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m)}this.commentIDs=k};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0};i.getCommentList=function(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new(c("Map"))();i.$UFIToplevelStreamedCommentList1.set(j,l)}var m=l.get(k);if(!m){m=new i(j);l.set(k,m)}return m};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k)};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return[];return Array.from(k.values())};i.$UFIToplevelStreamedCommentList4=function(j,k){__p&&__p();var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true});return}var m={};k.forEach(function(n){m[n]=true});i.$UFIToplevelStreamedCommentList2.set(j,m)};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3())};i.resetAllCommentLists=function(j){__p&&__p();var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3())});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2["delete"](j);c("UFIComments").resetComments(l)}};i.GLOBAL_ID="GLOBAL_ID";i.$UFIToplevelStreamedCommentList1=new(c("Map"))();i.$UFIToplevelStreamedCommentList2=new(c("Map"))();c("UFICentralUpdates").subscribe("update-actions",function(j,k){__p&&__p();if(!k.actions)return;k.actions.forEach(function(l){__p&&__p();if(l.actiontype!==c("UFIConstants").UFIActionType.DELETE_COMMENT)return;var m=c("UFIComments").getComment(l.commentid);if(!m)return;var n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c("UFIConstants").UFIStatus.DELETED&&m.status!==c("UFIConstants").UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n)})})});c("UFICentralUpdates").subscribe("update-comments",function(j,k){__p&&__p();if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l)i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate);else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate)})})});c("UFICentralUpdates").subscribe("update-feedback",function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return m.updateCommentCount(l.commentcount)})});f.exports=i}),22);
__d("UFIToplevelPagedCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentList","UFIToplevelPagedCommentListImpl","UFIToplevelStreamedCommentList","WebCommentViewOption"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new(c("UFIToplevelPagedCommentListImpl"))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n}return h[l][m]},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c("UFIToplevelStreamedCommentList").getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0)},resetCommentListsForFeedbackTargetID:function k(l){__p&&__p();if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true}}c("UFIComments").resetComments(m)},resetCommentListsWithContext:function k(l,m){__p&&__p();var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c("UFIReplyCommentList").resetWithContext(l,t,m,p)}}c("UFIComments").resetComments(o)}};function j(k){var l=c("UFIComments").getComment(k.commentid);if(!l)return;var m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c("UFIConstants").UFIStatus.DELETED&&l.status!==c("UFIConstants").UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m)})}c("UFICentralUpdates").subscribe("update-actions",function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c("UFIConstants").UFIActionType.DELETE_COMMENT:j(n);break}}});c("UFICentralUpdates").subscribe("update-comment-lists",function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable)}});c("UFICentralUpdates").subscribe("update-comments",function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})})});c("UFICentralUpdates").subscribe("update-feedback",function(k,l){__p&&__p();var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){__p&&__p();var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c("WebCommentViewOption").LIVE_STREAMING)return;q[s.value]=true});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount)})()});f.exports=i}),22);
__d("XGroupsMuteMembersController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/groups/mutemember/",{group_id:{type:"FBID"},user_id:{type:"FBID"},mute_duration:{type:"Enum",enumType:1},source:{type:"Enum",enumType:1},should_reload:{type:"Bool",defaultValue:false},mute_reason:{type:"FBID"},custom_expiration:{type:"Int"}})}),null);
__d("XTownHallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/townhall/",{address:{type:"String"},nux_shown:{type:"Bool",defaultValue:false},ref:{type:"Enum",enumType:1},term:{type:"String"},override_address:{type:"Bool",defaultValue:false},campaign:{type:"String"},setting_nux:{type:"Bool",defaultValue:false},notif_id:{type:"Int"},new_reps:{type:"Int"}})}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/actor/change/",{})}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/add/comment/",{})}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/answer/accept/",{})}),null);
__d("XUFICommentAppealSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/appeal_spam/",{})}),null);
__d("XUFICommentKeepSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/keep_spam/",{})}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/like/",{})}),null);
__d("XUFICommentSecureAccountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/secure_account/",{})}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/deletecommentandremovecommenter/",{})}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/delete/comment/",{})}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/edit/comment/",{})}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/hide/comment/",{})}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/like/",{})}),null);
__d("XUFISendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/message/send/",{})}),null);
__d("XUFIToggleTextDelightsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/textdelights/hide_comment_text_delights/",{comment_id:{type:"String"},should_hide:{type:"Bool",defaultValue:false}})}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/translate/comment/",{})}),null);
__d("UFIUserActions",["errorCode","fbt","invariant","ActorURI","AsyncResponse","Bootloader","ChannelClientID","ClientIDs","CommentPostedLiveState","ImmutableObject","MercuryServerDispatcher","UFICentralUpdates","UFICommentLogger","UFIComments","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionUserActions","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFIUserActionUtils","UFIVideoPlayerRegistry","UnicodeBidi","XGroupsMuteMembersController","XTownHallController","XUFIActorChangeController","XUFIAddCommentController","XUFICommentAcceptAnswerController","XUFICommentAppealSpamController","XUFICommentKeepSpamController","XUFICommentLikeController","XUFICommentSecureAccountController","XUFIDeleteCommentAndRemoveCommenterController","XUFIDeleteCommentController","XUFIEditCommentController","XUFIHideCommentController","XUFILikeController","XUFISendMessageController","XUFIToggleTextDelightsAsyncController","XUFITranslateCommentController","goURI","ifRequired"],(function a(b,c,d,aa,e,ba,ca,f,g){"use strict";__p&&__p();var h=Object.freeze({BAN:"ban",UNDO_BAN:"undo_ban"}),i={changeActor:function N(O,P){c("UFIFeedbackTargets").getFeedbackTarget(O,function(Q){var R;c("UFIToplevelPagedCommentList").resetCommentListsWithContext(O,P);c("UFIToplevelStreamedCommentList").resetAllCommentLists(O);c("UFICentralUpdates").inform("actor-changed",{actorID:P});var S=(R={from_actor_id:Q.actorforpost,ft_ent_identifier:O},R[c("ActorURI").PARAMETER_ACTOR]=P,R),T=c("XUFIActorChangeController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(T,S)})},changeCommentLike:function N(O,P,Q){__p&&__p();var R,S=c("UFIComments").getComment(O);if(S&&S.__typename==="saved"&&S.hasviewerliked!=P)(function(){var T=Q.target?c("UFIUserActionUtils").trackingData(Q.target):{},U=P?1:-1,V={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:P,likecount:(S.likecount||0)+U};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[V]});c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(W){var X={};X[c("ActorURI").PARAMETER_ACTOR]=W.actorforpost;var Y=c("XUFICommentLikeController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(Y,babelHelpers["extends"]({comment_id:O,legacy_id:S.legacyid,like_action:P,ft_ent_identifier:S.ftentidentifier,source:Q.source,client_id:c("ClientIDs").getNewClientID(),session_id:c("ChannelClientID").getID()},T,X))})})()},_getAttachment:function N(O){return O},_getLocalComment:function N(O,P,Q,R,S,T){var U=c("ClientIDs").getNewClientID(),V=c("UnicodeBidi").isDirectionLTR(Q)?"ltr":"rtl",W=this._getAttachment(S.attachedsticker);return{__typename:"local",ftentidentifier:P,body:{text:Q,dir:V},author:O.actorforpost,cancomment:false,clientid:null,fbid:null,id:U,ufiinstanceid:S.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:S.replyid,replycommentparentid:S.replycommentparentid,attachment:W,photo_comment:S.attachedphoto,video_comment:S.attachedvideo,timestamp:{time:Math.floor(Date.now()/1e3),text:f._("a few seconds ago")},photoTextTagID:S.photoTextTagID,isPhotoTag:S.isPhotoTag,photoTagX:S.photoTagX,photoTagY:S.photoTagY,videoTimeOffset:T,postedLiveState:S.islivestreaming?c("CommentPostedLiveState").LIVE:c("CommentPostedLiveState").ON_DEMAND}},addMessage:function N(O,P,Q,R,S){c("UFIFeedbackTargets").getFeedbackTarget(O,function(T){this.sendMessage(O,P,Q,R,S)}.bind(this))},sendMessage:function N(O,P,Q,R,S){var T=c("UFIFeedbackTargets").getFeedbackTargetIfExists(O);if(!(T&&T.actorforpost))return;var U=this._getLocalComment(T,O,P,Q,R,null);this._sendMessageToServer(O,T.actorforpost,P,Q,R,U.id,S)},addComment:function N(O,P,Q,R){c("UFIFeedbackTargets").getFeedbackTarget(O,function(S){var T=this.createComment(O,P,Q,R);if(!T)return;var U={actiontype:c("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:S.actorforpost,hasviewersubscribed:true,entidentifier:S.entidentifier},V={actiontype:c("UFIConstants").UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:S.targetfbid};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[T],actions:[U,V]})}.bind(this))},createComment:function N(O,P,Q,R){__p&&__p();var S=c("UFIFeedbackTargets").getFeedbackTargetIfExists(O);if(!(S&&S.actorforpost))return null;var T=null;if(R.isBroadcasterUFI)T=c("ifRequired")("LiveVideoBroadcastBroadcastStore",function(X){return X.getCurrentBroadcastTime()});else if(R.fluentContentToken&&(R.isLiveVOD||R.islivestreaming||R.enableVODCommentTimestamps)){var U=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(R.target,R.fluentContentToken)||0;if(R.isLiveVOD||R.islivestreaming)T=U;else{var V=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(R.target,R.fluentContentToken);if(V!=null&&U>0&&U<Math.floor(V.getPlaybackDuration()))T=U}}var W=this._getLocalComment(S,O,P,Q,R,T);this._sendCommentToServer(O,S.actorforpost,P,Q,R,W.id,T);return W},_sendMessageToServer:function N(O,P,Q,R,S,T,U){var V=c("XUFISendMessageController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(V,{ft_ent_identifier:O,comment_text:R,client_id:T,attached_sticker_fbid:S.attachedsticker?S.attachedsticker.fbid:0,attached_photo_fbid:S.attachedphoto?S.attachedphoto.fbid:0,attached_video_fbid:S.attachedvideo?S.attachedvideo.fbid:0,attached_share_url:S.attachedshareurl,messenger_recipient:U})},_sendCommentToServer:function N(O,P,Q,R,S,T,U){__p&&__p();var V=null;if(S.reply_fbid)V=S.reply_fbid;else if(S.replyid){var W=c("UFIComments").getComment(S.replyid);W||g(0);V=W.fbid}var X=void 0;if(c("UFIConfig").logCommentPost)c("UFICommentLogger").logNewCommentPost(T,S.timestamp||0,{has_photo:!!S.attachedphoto,has_video:!!S.attachedvideo,has_sticker:!!S.attachedsticker,is_reply:!!S.replyid});var Y={};Y[c("ActorURI").PARAMETER_ACTOR]=P;var Z=c("XUFIAddCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(Z,babelHelpers["extends"]({ft_ent_identifier:O,comment_text:R,source:S.source,client_id:T,session_id:c("ChannelClientID").getID(),reply_fbid:V,parent_comment_id:S.parent_comment_id||S.replyid,reply_comment_parent_id:S.replycommentparentid,rootid:S.rootid,clp:X,attached_sticker_fbid:S.attachedsticker?S.attachedsticker.fbid:0,attached_photo_fbid:S.attachedphoto?S.attachedphoto.fbid:0,attached_video_fbid:S.attachedvideo?S.attachedvideo.fbid:0,attached_share_url:S.attachedshareurl,feedback_referrer:S.feedbackReferrer,feed_context:S.feedcontext,video_time_offset:U,is_live_streaming:S.islivestreaming,is_markdown:S.isMarkdown},c("UFIUserActionUtils").trackingData(S.target),Y,{photo_text_tag_id:S.photoTextTagID,is_private:S.isPrivate,is_photo_tag:S.isPhotoTag,photo_fbid:S.photoFBID,photo_tag_x:S.photoTagX,photo_tag_y:S.photoTagY}))},_hasCommentTextChanged:function N(O,P){return!!O.body&&O.body.text!=P},_hasCommentPhotoChanged:function N(O,P){return!!((O||P)&&!(O&&P)||O&&P&&O.fbid!=P.fbid)},_hasCommentVideoChanged:function N(O,P){return!!((O||P)&&!(O&&P)||O&&P&&O.fbid!=P.fbid)},_hasCommentStickerChanged:function N(O,P){return!!((O||P)&&!(O&&P)||O&&O.type=="sticker"&&P&&O.fbid!=P.fbid)},_hasCommentShareURLChanged:function N(O,P){if(P)return true;else return Boolean(O&&O.type=="share")},editComment:function N(O,P,Q,R){__p&&__p();var S=c("UFIUserActionUtils").trackingData(R.target),T=c("UFIComments").getComment(O);if(!T)return;var U=this._hasCommentTextChanged(T,P)||this._hasCommentPhotoChanged(T.photo_comment,R.attachedPhoto)||this._hasCommentStickerChanged(T.attachment,R.attachedSticker)||this._hasCommentVideoChanged(T.video_comment,R.attachedVideo)||this._hasCommentShareURLChanged(T.attachment,R.attachedShareURL);T=c("ImmutableObject").set(T,{status:c("UFIConstants").UFIStatus.PENDING_EDIT,body:{text:P},editnux:null,attachment:R.attachedSticker,photo_comment:R.attachedPhoto,video_comment:R.attachedVideo});if(U)T=c("ImmutableObject").set(T,{originalTimestamp:T.timestamp.time,timestamp:{time:Math.floor(Date.now()/1e3),text:f._("a few seconds ago")}});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[T]});c("UFIFeedbackTargets").getFeedbackTarget(T.ftentidentifier,function(V){var W={};W[c("ActorURI").PARAMETER_ACTOR]=V.actorforpost;var X=c("XUFIEditCommentController").getURIBuilder().getURI();if(T)c("MercuryServerDispatcher").trySend(X,babelHelpers["extends"]({ft_ent_identifier:T.ftentidentifier,comment_text:Q,source:R.source,comment_id:T.id,parent_comment_id:T.parentcommentid,attached_sticker_fbid:R.attachedSticker?R.attachedSticker.fbid:0,attached_photo_fbid:R.attachedPhoto?R.attachedPhoto.fbid:0,attached_video_fbid:R.attachedVideo?R.attachedVideo.fbid:0,attached_share_url:R.attachedShareURL,is_markdown:R.isMarkdown},S,W))})},translateComments:function N(O,P,Q,R){var S=c("XUFITranslateCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(S,{ft_ent_identifier:O,comment_ids:P,source:R.source,trigger:Q})},setHideAsSpam:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(Q.target),S=c("UFIComments").getComment(O),T={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:P};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S)c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFIHideCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:O,spam_action:P,ft_ent_identifier:S.ftentidentifier,source:Q.source},R,V))})},keepSpam:function N(O,P){__p&&__p();var Q=c("UFIUserActionUtils").trackingData(P.target),R=c("UFIComments").getComment(O),S={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_KEEP_SPAM};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]});if(R)c("UFIFeedbackTargets").getFeedbackTarget(R.ftentidentifier,function(T){var U={};U[c("ActorURI").PARAMETER_ACTOR]=T.actorforpost;var V=c("XUFICommentKeepSpamController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(V,babelHelpers["extends"]({comment_id:O,ft_ent_identifier:R.ftentidentifier,source:P.source},Q,U));c("Bootloader").loadModules(["SimpleXUIDialog"],function(W){W.show(f._("This comment is now visible on your post."),f._("Comment Restored"))},"UFIUserActions")})},appealSpam:function N(O,P,Q){__p&&__p();var R=c("UFIUserActionUtils").trackingData(Q.target),S=c("UFIComments").getComment(O),T={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_APPEAL_SPAM};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S)c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFICommentAppealSpamController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:O,ft_ent_identifier:S.ftentidentifier,source:Q.source},R,V));c("Bootloader").loadModules(["SimpleXUIDialog"],function(X){X.show(f._("Your feedback helps us do better."),f._("Thanks for Letting Us Know"))},"UFIUserActions")})},secureAccount:function N(O,P){var Q=c("UFIUserActionUtils").trackingData(P.target),R=c("UFIComments").getComment(O),S={actiontype:c("UFIConstants").UFIActionType.COMMENT_SECURE_ACCOUNT,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]});if(R)c("UFIFeedbackTargets").getFeedbackTarget(R.ftentidentifier,function(T){var U={};U[c("ActorURI").PARAMETER_ACTOR]=T.actorforpost;var V=c("XUFICommentSecureAccountController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(V,babelHelpers["extends"]({comment_id:R.id,ft_ent_identifier:R.ftentidentifier,source:P.source},Q,U))})},removeComment:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(P.target),S=c("UFIComments").getComment(O),T={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S&&S.__typename==="saved")c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFIDeleteCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:S.id,comment_legacyid:S.legacyid,ft_ent_identifier:S.ftentidentifier,one_click:P.oneclick,source:P.source,client_id:c("ClientIDs").getNewClientID()},R,V))})},removeCommentWithRule:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(P.target),S=c("UFIComments").getComment(O),T={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S&&S.__typename==="saved")c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFIDeleteCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:S.id,comment_legacyid:S.legacyid,ft_ent_identifier:S.ftentidentifier,one_click:P.oneclick,source:P.source,rule_id:Q,client_id:c("ClientIDs").getNewClientID()},R,V))})},deleteCommentAndRemoveCommenter:function N(O,P,Q,R,S,T,U){var V=c("UFIUserActionUtils").trackingData(P.target),W=c("UFIComments").getComment(O),X={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[X]});if(W&&W.__typename==="saved")c("UFIFeedbackTargets").getFeedbackTarget(W.ftentidentifier,function(Y){var Z={};Z[c("ActorURI").PARAMETER_ACTOR]=Y.actorforpost;var $=c("XUFIDeleteCommentAndRemoveCommenterController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend($,babelHelpers["extends"]({comment_id:W.id,comment_legacyid:W.legacyid,ft_ent_identifier:W.ftentidentifier,one_click:P.oneclick,source:P.source,delete_posts:Q,delete_comments:R,decline_pending_members:S,block_permanently:T,apply_to_other_groups:U,client_id:c("ClientIDs").getNewClientID()},V,Z))})},muteMember:function N(O,P,Q,R){__p&&__p();var S=c("UFIComments").getComment(O),T=Q!==null;if(S&&S.__typename==="saved"){var U={authorid:S.author,actiontype:c("UFIConstants").UFIActionType.MUTE_MEMBER,shouldmute:T};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[U]});var V;c("Bootloader").loadModules(["GroupMemberActionSource"],function(X){V=X.GROUP_COMMENT},"UFIUserActions");var W=c("XGroupsMuteMembersController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,{group_id:S.group_id,user_id:S.author,mute_duration:Q,custom_expiration:R,should_reload:false,source:V})}},toggleTextDelights:function N(O,P,Q){var R=c("XUFIToggleTextDelightsAsyncController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(R,{comment_id:O.id,ft_ent_identifier:O.ftentidentifier,should_hide:Q,parent_comment_id:O.parentcommentid,source:P.source})},changeAcceptedAnswer:function N(O,P){c("MercuryServerDispatcher").trySend(x,{ft_ent_identifier:O.id,do_accept:P})},banUser:function N(O,P,Q,R){var S=Q?h.BAN:h.UNDO_BAN;c("MercuryServerDispatcher").trySend("/ajax/ufi/ban_user.php",{page_id:P,commenter_id:O.author,action:S,comment_id:O.id,client_side:true})},changeSubscribe:function N(O,P,Q){c("UFIFeedbackTargets").getFeedbackTarget(O,function(R){var S=c("UFIUserActionUtils").trackingData(Q.target);if(R.hasviewersubscribed!==P){var T={actiontype:c("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:R.actorforpost,hasviewersubscribed:P,entidentifier:O};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});var U={};U[c("ActorURI").PARAMETER_ACTOR]=R.actorforpost;c("MercuryServerDispatcher").trySend("/ajax/ufi/subscribe.php",babelHelpers["extends"]({subscribe_action:P,ft_ent_identifier:O,source:Q.source,client_id:c("ClientIDs").getNewClientID(),rootid:Q.rootid,comment_expand_mode:Q.commentexpandmode},S,U))}})},fetchSpamComments:function N(O,P,Q,R){c("MercuryServerDispatcher").trySend("/ajax/ufi/id_comment_fetch.php",{ft_ent_identifier:O,viewas:R,comment_ids:P,parent_comment_id:Q,source:null})},manageConstituentBadge:function N(O){c("goURI")(c("XTownHallController").getURIBuilder().setBool("setting_nux",true).getURI())},removePreview:function N(O,P){var Q=c("UFIUserActionUtils").trackingData(P.target),R={commentid:O.id,actiontype:c("UFIConstants").UFIActionType.REMOVE_PREVIEW};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[R]});c("MercuryServerDispatcher").trySend("/ajax/ufi/remove_preview.php",babelHelpers["extends"]({comment_id:O.id,ft_ent_identifier:O.ftentidentifier,source:P.source},Q))}};function j(N){c("AsyncResponse").defaultErrorHandler(N)}function k(N){var O=N.request.data;c("AsyncResponse").defaultErrorHandler(N);var P=O.client_id||O.comment_id,Q=c("UFIComments").getComment(P);if(!Q)return;var R=Q.status===c("UFIConstants").UFIStatus.PENDING_EDIT?c("UFIConstants").UFIStatus.FAILED_EDIT:c("UFIConstants").UFIStatus.FAILED_ADD;Q=c("ImmutableObject").setDeep(Q,{status:R,allowRetry:l(N),body:{mentionstext:O.comment_text,mentionsphoto:Q.photo_comment,mentionsvideo:Q.video_comment}});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}function l(N){var O=N.getError();if(N.isBlockedAction())return false;if(N.silentError)return true;if(O===1357012||O===1357006)return false;return true}function m(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(!Q)return;Q=c("ImmutableObject").set(Q,{status:Q.priorstatus||null,priorstatus:undefined});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}function n(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(!Q)return;Q=c("ImmutableObject").set(Q,{commentid:P,needsApproval:!Q.needsApproval,isApproved:!Q.isApproved});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}function o(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(Q){Q=c("ImmutableObject").set(Q,{commentid:P,appealStatus:null,canAppeal:!Q.canAppeal,canSecure:!Q.canSecure});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}}function p(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(Q&&O.like_action===Q.hasviewerliked){var R=Q.hasviewerliked?-1:1,S={commentid:P,actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:!Q.hasviewerliked,likecount:(Q.likecount||0)+R};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]})}c("AsyncResponse").defaultErrorHandler(N)}function q(N){var O=N.request.data,P=O.ft_ent_identifier;c("UFIFeedbackTargets").getFeedbackTarget(P,function(Q){if(Q.hasviewerliked===O.like_action){var R=Q.hasviewerliked?-1:1,S={actiontype:c("UFIConstants").UFIActionType.LIKE_ACTION,actorid:Q.actorforpost,hasviewerliked:!Q.hasviewerliked,likecount:(Q.likecount||0)+R,entidentifier:P,likesentences:{current:Q.likesentences.alternate,alternate:Q.likesentences.current}};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]})}});c("AsyncResponse").defaultErrorHandler(N)}function r(N){var O=N.request.data,P=O.ft_ent_identifier;c("UFIFeedbackTargets").getFeedbackTarget(P,function(Q){if(Q.hasviewersubscribed===O.subscribe_action){var R={actiontype:c("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:Q.actorforpost,hasviewersubscribed:!Q.hasviewersubscribed,entidentifier:P};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[R]})}});c("AsyncResponse").defaultErrorHandler(N)}var s={"/ajax/ufi/ban_user.php":{mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:j},"/ajax/ufi/subscribe.php":{mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:r,batch_if:L,batch_function:M},"/ajax/ufi/id_comment_fetch.php":{mode:c("MercuryServerDispatcher").IMMEDIATE},"/ajax/ufi/remove_preview.php":{mode:c("MercuryServerDispatcher").IMMEDIATE},"/profile/broadcast_request/async/add_composer_token/":{mode:c("MercuryServerDispatcher").IMMEDIATE}},t=c("XUFIAddCommentController").getURIBuilder().getURI();s[t]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:k};var u=c("XUFIDeleteCommentController").getURIBuilder().getURI();s[u]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:m};var v=c("XUFIDeleteCommentAndRemoveCommenterController").getURIBuilder().getURI();s[v]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:m};var w=c("XUFICommentLikeController").getURIBuilder().getURI();s[w]={mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:p,batch_if:J,batch_function:M};var x=c("XUFICommentAcceptAnswerController").getURIBuilder().getURI();s[x]={mode:c("MercuryServerDispatcher").IMMEDIATE};var y=c("XGroupsMuteMembersController").getURIBuilder().getURI();s[y]={mode:c("MercuryServerDispatcher").IMMEDIATE};var z=c("XUFIToggleTextDelightsAsyncController").getURIBuilder().getURI();s[z]={mode:c("MercuryServerDispatcher").IMMEDIATE};var A=c("XUFIHideCommentController").getURIBuilder().getURI();s[A]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:m};var B=c("XUFICommentKeepSpamController").getURIBuilder().getURI();s[B]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:n};var C=c("XUFICommentAppealSpamController").getURIBuilder().getURI();s[C]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:o};var D=c("XUFICommentSecureAccountController").getURIBuilder().getURI();s[D]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:o};var E=c("XUFILikeController").getURIBuilder().getURI();s[E]={mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:q,batch_if:K,batch_function:M};var F=c("XUFIEditCommentController").getURIBuilder().getURI();s[F]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:k};var G=c("XUFITranslateCommentController").getURIBuilder().getURI();s[G]={mode:c("MercuryServerDispatcher").IMMEDIATE};var H=c("XUFIActorChangeController").getURIBuilder().getURI();s[H]={mode:c("MercuryServerDispatcher").IMMEDIATE};var I=c("XUFISendMessageController").getURIBuilder().getURI();s[I]={mode:c("MercuryServerDispatcher").IMMEDIATE};c("MercuryServerDispatcher").registerEndpoints(s);function J(N,O){return N&&N.ft_ent_identifier==O.ft_ent_identifier&&N.comment_id==O.comment_id}function K(N,O){return N&&N.ft_ent_identifier==O.ft_ent_identifier}function L(N,O){return N&&N.ft_ent_identifier==O.ft_ent_identifier}function M(N,O){return O}e.exports=babelHelpers["extends"]({},i,c("UFIReactionUserActions"))}),null);
__d("UFISpamStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType","UFIUserActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length};j.prototype.reduce=function(k,l){switch(l.type){case c("UFIStoryActionType").SPAM_FETCHED:k=babelHelpers["extends"]({},k);l.commentIDs.forEach(function(m){return k[m]=true});c("UFIUserActions").fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break}return k};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIDispatcher",["ReactDispatcher_DEPRECATED","UFISharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactDispatcher_DEPRECATED"));i=h&&h.prototype;j.prototype.dispatch=function(k){i.dispatch.call(this,k);c("UFISharedDispatcher").dispatch(k)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("UFIInstanceAction",["UFIInstanceActionType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={changeOrderingMode:function i(j,k){return{type:c("UFIInstanceActionType").CHANGE_ORDER_MODE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,mode:k}},toggleComments:function i(j){return{type:c("UFIInstanceActionType").TOGGLE_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},changeCommentListVisibility:function i(j,k){return{type:c("UFIInstanceActionType").CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,visibility:k}},init:function i(j,k){return{type:c("UFIInstanceActionType").INIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,payload:k}},didRequestVODComments:function i(j){return{type:c("UFIInstanceActionType").REQUESTED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},didReceiveVODComments:function i(j){return{type:c("UFIInstanceActionType").RECEIVED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},remove:function i(j){return{type:c("UFIInstanceActionType").REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},toggleCommercialBreak:function i(j,k){return{type:c("UFIInstanceActionType").TOGGLE_COMMERCIAL_BREAK,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,inCommercial:k}},translateAll:function i(j){return{type:c("UFIInstanceActionType").TRANSLATE_ALL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},playLiveVODHighlights:function i(j,k){return{type:c("UFIInstanceActionType").PLAY_LIVE_VOD_HIGHLIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,playingLiveVODHighlights:k}}};f.exports=h}),null);
__d("FacecastStreamingCommentDelayTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentDelayLoggerConfig",this.$FacecastStreamingCommentDelayTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentDelayLoggerConfig",this.$FacecastStreamingCommentDelayTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$FacecastStreamingCommentDelayTypedLogger1={};return this};h.prototype.updateData=function(j){this.$FacecastStreamingCommentDelayTypedLogger1=babelHelpers["extends"]({},this.$FacecastStreamingCommentDelayTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.appversion=j;return this};h.prototype.setClientUserID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.client_userid=j;return this};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.comment_id=j;return this};h.prototype.setEvent=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.event=j;return this};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.protocol=j;return this};h.prototype.setVC=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.vc=j;return this};var i={appid:true,appversion:true,client_userid:true,comment_id:true,event:true,protocol:true,vc:true};f.exports=h}),null);
__d("UFISubscriptionUpdates",["fbt","BanzaiODS","FacecastStreamingCommentDelayTypedLogger","ImmutableObject","LiveWWWFeedbackTypedLogger","UFICentralUpdates","UFIComments","UFIConfig","UFIConstants","UFIReactionsUtils","UFISharedDispatcher","UFIStoryAction","UFIStreamingStateType","requireWeak"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();c("BanzaiODS").setEntitySample("feedback",1e-4);function i(k,l,m){new(c("LiveWWWFeedbackTypedLogger"))().setMechanism("graphql_subscriptions").setEvent("receive_payload").setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log()}var j={handleLiveLike:function k(l,m,n){__p&&__p();c("BanzaiODS").bumpEntityKey("feedback","gql_like_received");i("like",n);if(!m||!m.feedback_like_subscribe)return;var o=m.feedback_like_subscribe.feedback,p=m.feedback_like_subscribe.liker;if(!o||!p)return;var q=[{actiontype:c("UFIConstants").UFIActionType.LIKE_ACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,likesentences:{current:o.does_viewer_like?o.viewer_likes_sentence:o.viewer_does_not_like_sentence,alternate:o.does_viewer_like?o.viewer_does_not_like_sentence:o.viewer_likes_sentence},hasviewerliked:o.does_viewer_like,likecount:o.likers.count}],r=o.reactions_summary;if(r){var s=c("UFIReactionsUtils").getReactionCountMapFromSummary(o.reactions_summary),t=o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0,u=o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count;q.push({actiontype:c("UFIConstants").UFIActionType.REACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,viewerreaction:t,reactioncount:o.reactors.count,reactioncountreduced:u,reactioncountmap:s,reactionsentences:{current:t?o.viewer_likes_reaction_sentence:o.viewer_does_not_like_reaction_sentence,alternate:t?o.viewer_does_not_like_reaction_sentence:o.viewer_likes_reaction_sentence}})}c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{actions:q})},handleLiveComment:function k(l,m,n){c("BanzaiODS").bumpEntityKey("feedback","gql_comment_received");var o=m&&m.comment;if(!o)return;i("comment",n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{comments:[p]})},handleLiveStreamingComment:function k(l,m,n,o){__p&&__p();c("BanzaiODS").bumpEntityKey("feedback","gql_streaming_comment_received");var p=m&&m.comment;if(!p)return;i("comment",n,{comment_id:p.legacy_token});if(o)new(c("FacecastStreamingCommentDelayTypedLogger"))().setCommentID(p.legacy_fbid).setEvent("push").log();var q=this.prepareCommentData(l,p,n,m.client_mutation_id);c("requireWeak")("UFILiveStreamingComments",function(r){r.enqueueSubscribedComment(l,{comments:[q],streamingstate:c("UFIStreamingStateType").LIVE,priority:p.live_streaming_comment_priority},m.feedback.top_level_comments.total_count)})},prepareCommentData:function k(l,m,n,o){__p&&__p();var p={__typename:"saved",author:m.author.id,body:m.body,cancomment:m.feedback.can_viewer_comment,canedit:m.can_viewer_edit,canremove:m.can_viewer_delete,canreport:m.can_viewer_report,canembed:m.can_viewer_embed,canshare:m.can_viewer_share,commentshareuri:m.www_share_uri_raw,clientid:o,ftentidentifier:l,id:m.legacy_token,fbid:m.legacy_fbid,legacyid:m.legacy_fbid,timestamp:{time:m.created_time,text:h._("a few seconds ago")},hasviewerliked:m.feedback.does_viewer_like,isauthorbot:m.isauthorbot,isauthornoncoworker:m.is_author_non_coworker,isfeatured:m.is_featured,istranslatable:m.translation_available_for_viewer,likecount:m.feedback.likers.count,viewercanlike:m.feedback.can_viewer_like,parentcommentid:m.comment_parent&&m.comment_parent.legacy_token,spamreplycount:0,hasConstituentBadge:m.has_constituent_badge};if(m.attachments.length){var q=m.attachments[0],r=q.style_list;if(r&&r.length){var s=r[0];if(s=="sticker"){var t=q.target;p.attachment={fbid:t.id,metadata:{source_uri:t.img.uri,source_uri_2x:t.img_2x.uri,width:t.img.width,height:t.img.height,frameCount:t.frame_count,frameRate:t.frame_rate,framesPerCol:t.frames_per_column,framesPerRow:t.frames_per_row,sprite_uri:t.sprite_img&&t.sprite_img.uri,sprite_uri_2x:t.sprite_img_2x&&t.sprite_img_2x.uri},type:"sticker"}}else if(s=="photo"){var u=q.target;p.attachment={fbid:u.id,metadata:{preview_uri:u.photo_img&&u.photo_img.uri,width:u.photo_img.width,height:u.photo_img.height,url:u.url},type:"photo"}}else if(s=="share"||s=="image_share"){q.type="live_share";p.attachment=q}else if(s=="animated_image_share"||s=="animated_image_autoplay"||s=="animated_image_video"||s=="animated_image_video_autoplay"){q.type="gif";p.attachment=q}else if(s=="video_inline"){q.type="video";p.attachment=q}else if(s=="comment_place_info"){q.type="live_comment_place_info";p.attachment=q}else if(s=="donation"){q.type="donation";p.attachment=q}else if(s=="TIP_JAR_PAYMENT"){q.type="TIP_JAR_PAYMENT";p.attachment=q}}}var v=m.feedback;if(v.reactions_summary){p.canviewerreact=v.can_viewer_react;p.reactioncount=v.reactors.count;p.reactioncountmap=c("UFIReactionsUtils").getReactionCountMapFromSummary(v.reactions_summary);p.reactioncountreduced=v.reaction_count_reduced?v.reaction_count_reduced:v.reactors.count;p.viewerreaction=v.viewer_feedback_reaction_info?v.viewer_feedback_reaction_info.key:0}return p},handleLivePinnedComment:function k(l,m,n){var o=m.pinned_comment_event_create_subscribe.pinned_comment_event.pinned_comment;if(o){var p=j.prepareCommentData(l.ftentidentifier,o,n,m.client_mutation_id);c("UFIComments").setComment(p.id,new(c("ImmutableObject"))(p));c("UFISharedDispatcher").dispatch(c("UFIStoryAction").pinComment(l,p.id))}else c("UFISharedDispatcher").dispatch(c("UFIStoryAction").unpinComment(l))},handleLiveCommentLike:function k(l,m,n){i("comment_like",n);var o=m&&m.comment_like_subscribe&&m.comment_like_subscribe.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c("UFIReactionsUtils").getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,clientid:m.comment_like_subscribe.client_mutation_id,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]})}};f.exports=j}),null);
__d("UFIReactionStore",["Arbiter","FluxStore","UFIReactionTypes","UFIStoryActionType","UFIUIEvents","UFIUserActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c("UFIStoryActionType").CHANGE_REACTION:c("UFIUserActions").changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming,instanceid:k.contextArgs.instanceid},k.target,k.sphericalYaw,k.sphericalPitch);c("Arbiter").inform(c("UFIUIEvents").ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c("UFIReactionTypes").LIKE,reaction_type:k.reactionType,target:k.target});break}};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("FocusRelocator.react",["csx","CSS","Focus","React","getActiveElement"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.componentWillReceiveProps=function(l){var m=this.props,n=m.from,o=m.to,p=l.from,q=l.to;if(p&&q&&(n!==p||o!==q)){this.$FocusRelocator1&&this.$FocusRelocator1.remove();this.$FocusRelocator1=c("Focus").relocate(p,q)}};k.prototype.componentDidUpdate=function(){this.$FocusRelocator2()};k.prototype.componentWillUnmount=function(){this.$FocusRelocator1&&this.$FocusRelocator1.remove();this.$FocusRelocator1=null};k.prototype.render=function(){return this.props.children};k.prototype.$FocusRelocator3=function(){var l=this.props,m=l.from,n=l.to;if(m&&n){c("Focus").performRelocation(m,n,c("getActiveElement")()===this.props.from);this.$FocusRelocator2()}};k.prototype.$FocusRelocator2=function(){setTimeout(function(){if(this.props.to&&c("getActiveElement")()===this.props.from&&!c("CSS").matchesSelector(this.props.to,"._16jm"))this.$FocusRelocator3()}.bind(this),0)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("UFIBusinessActorIcon.react",["cx","AppUserRoleConstants.brands","BusinessActorUtils.brands","React","getObjectValues","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=c("BusinessActorUtils.brands").getInitials(this.props.firstName,this.props.lastName),n=this.props.businessRole===c("AppUserRoleConstants.brands").ADMIN;return c("React").createElement("div",{className:c("joinClasses")(this.props.classNames,"_1rpl")},c("React").createElement("div",{className:c("joinClasses")(this.props.textClassNames,n?"_1rpm":null)},m))};function l(){i.apply(this,arguments)}l.propTypes={firstName:k.string.isRequired,lastName:k.string.isRequired,classNames:k.string,textClassNames:k.string,businessRole:k.oneOf(c("getObjectValues")(c("AppUserRoleConstants.brands")))};f.exports=l}),null);
__d("UFIDispatcherContext.react",["React","UFIDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.getChildContext=function(){return{dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores}};k.prototype.render=function(){return this.props.children};function k(){h.apply(this,arguments)}k.childContextTypes={dispatch:j.func,stores:j.object};f.exports=k}),null);
__d("UFILikeLink.react",["cx","fbt","Bootloader","React","ReactDOM","SutroPhase2GatingConfig","TrackingNodes","UFILikeWebDriverIDs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=null;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$UFILikeLink1=null,this.state={nuxShown:false},this.onClick=function(t){__p&&__p();if(this.props.href)return;t.preventDefault();this.props.onClick&&this.props.onClick(t);if(this.props.showLikeNuxForGroupMallAds){var u=!this.props.likeAction;if(!u){c("ReactDOM").findDOMNode(this.$UFILikeLink1).focus();this.setState({nuxShown:true});c("Bootloader").loadModules(["UFIGroupMallAdsLikeNux.react"],function(v){m=v},"UFILikeLink.react")}else this.setState({nuxShown:false})}}.bind(this),p}n.prototype.renderLayers=function(){if(!this.state.nuxShown||!m)return null;return c("React").createElement(m,{nuxShown:this.state.nuxShown,nuxContent:this.props.likeNuxContent,contextRef:this.$UFILikeLink1})};n.prototype.render=function(){var o=!this.props.likeAction,p=o?c("UFILikeWebDriverIDs").UNLIKE_LINK:c("UFILikeWebDriverIDs").LIKE_LINK,q=!o||!this.props.forcelegacyrendering?i._("Like"):i._("Unlike"),r=c("TrackingNodes").getTrackingInfo(o?c("TrackingNodes").types.UNLIKE_LINK:c("TrackingNodes").types.LIKE_LINK),s=o?i._("Unlike this"):i._("Like this"),t=c("SutroPhase2GatingConfig").enabled_centered_ufi;return c("React").createElement("span",{className:t?"_3wv2":""},c("React").createElement("a",{className:"_48-k UFILikeLink"+(o?" UFILinkBright":""),ref:function(u){return this.$UFILikeLink1=u}.bind(this),"data-testid":p,href:this.props.href||"#",role:"button","aria-label":s,"aria-live":"polite","aria-pressed":o,rel:this.props.rel,ajaxify:this.props.ajaxify,onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:function(u,v){this.props.onKeyDown&&this.props.onKeyDown(u,v)}.bind(this),"data-ft":r},q),this.renderLayers())};n.propTypes={ajaxify:l.string,forcelegacyrendering:l.bool,href:l.string,likeAction:l.bool,likeNuxContent:l.string,rel:l.string,showLikeNuxForGroupMallAds:l.bool};n.defaultProps={forcelegacyrendering:false,showLikeNuxForGroupMallAds:false};f.exports=n}),null);
__d("UFIShareLink.react",["cx","fbt","CurrentUser","React","SutroPhase2GatingConfig","TrackingNodes","XUISpinner.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$UFIShareLink1=function(event){if(this.props.href&&this.props.href!=="#"&&!this.props.onClick)return;event.preventDefault();this.props.onClick&&this.props.onClick(event)}.bind(this),n}l.prototype.render=function(){__p&&__p();var m=i._("Send this to friends or post it on your timeline.");if(c("CurrentUser").isWorkUser())m=i._("Send this to coworkers or post it on your timeline.");var n='{ "tn": "'+c("TrackingNodes").encodeTN(c("TrackingNodes").types.SHARE_LINK)+'", "type": 25 }',o=null;if(this.props.rel!=="dialog")o=c("React").createElement(c("XUISpinner.react"),{className:"UFIShareLinkSpinner _1wfk",showOnAsync:true});var p=this.props,q=p.openOnInit,r=babelHelpers.objectWithoutProperties(p,["openOnInit"]),s=c("SutroPhase2GatingConfig").enabled_centered_ufi;return c("React").createElement("span",{className:"_27de"+(s?" _4noj":"")},c("React").createElement("a",babelHelpers["extends"]({},r,{className:c("joinClasses")(this.props.className,"share_action_link _5f9b"),onClick:this.$UFIShareLink1,ref:function t(u){if(u&&q)u.click()},role:"button",tabIndex:0,"data-ft":n,title:m}),i._("Share"),o))};f.exports=l}),null);
__d("UFIStickerButton.react",["cx","fbt","Arbiter","Bootloader","FocusRelocator.react","Link.react","React","StickerInterfaces","getObjectValues"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"UFIStickerButton",_clickGuard:false,_updateListener:null,_linkRef:null,propTypes:{onStickerFlyoutShow:j.func,onStickerSelected:j.func.isRequired,onEmoticonSelected:j.func,showTooltip:j.bool,stickerInterface:j.oneOf(c("getObjectValues")(c("StickerInterfaces"))),tabIndex:j.number},getDefaultProps:function l(){return{showTooltip:true,stickerInterface:c("StickerInterfaces").COMMENTS}},getInitialState:function l(){return{renderFlyout:null,flyoutShown:false}},componentDidMount:function l(){this._updateListener=c("Arbiter").subscribe("page_transition",function(){return this._hideFlyout()}.bind(this))},componentWillUnmount:function l(){this._updateListener&&this._updateListener.unsubscribe()},render:function l(){var m=i._("Post a sticker");return c("React").createElement(c("FocusRelocator.react"),{from:this._linkRef,to:this.refs.icon},c("React").createElement(c("Link.react"),{"aria-label":m,className:"_r1a UFICommentStickerButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":this.props.showTooltip?m:null,linkRef:this._setRef,onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,role:"button",tabIndex:this.props.tabIndex},c("React").createElement("div",{ref:"icon",className:"UFICommentStickerIcon"+(this.state.flyoutShown?" UFICommentStickerIconActive":"")}),this.props.children,this.state.renderFlyout?this.state.renderFlyout():null))},_hideFlyout:function l(){this.setState({flyoutShown:false})},_prepareForClick:function l(){this._clickGuard=this.state.flyoutShown},_onLinkClicked:function l(m){__p&&__p();m.preventDefault();if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true})}return}c("Bootloader").loadModules(["ContextualLayerAutoFlip","LayerTabIsolation","StickersFlyout.react","XUIContextualDialog.react"],function(n,o,p,q){this.setState({flyoutShown:true,renderFlyout:function(){return c("React").createElement(q,{alignment:"right",behaviors:{ContextualLayerAutoFlip:n,LayerTabIsolation:o},className:"_5e-r",contextRef:function(){return this._linkRef}.bind(this),onBlur:this._hideFlyout,onToggle:function(r){if(!r&&this.state.flyoutShown)this._hideFlyout()}.bind(this),position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:278},c("React").createElement("div",null,c("React").createElement(p,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow()}.bind(this),"UFIStickerButton.react")},_onStickerSelected:function l(m,event,n){this.props.onStickerSelected(m,event,n);this._hideFlyout()},_onEmoticonSelected:function l(m){this.props.onEmoticonSelected&&this.props.onEmoticonSelected(m);this._hideFlyout()},_setRef:function l(m){this._linkRef=m}});f.exports=k}),null);
__d("EmojiInputButton.react",["fbt","Bootloader","FocusRelocator.react","Link.react","React","createCancelableFunction","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=null;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){__p&&__p();j.constructor.call(this,m);this.$EmojiInputButton4=function(event){event.preventDefault();event.stopPropagation();this.props.onClick&&this.props.onClick();this.setState({locked:false,visible:!this.state.locked?!this.state.visible:false})}.bind(this);this.$EmojiInputButton5=function(event){this.setState({locked:this.state.visible})}.bind(this);this.$EmojiInputButton7=function(n){if(!n)this.setState({visible:false,isVariationsShown:false})}.bind(this);this.$EmojiInputButton8=function(n){this.setState({isVariationsShown:n})}.bind(this);this.state={locked:false,visible:false,isVariationsShown:false}}l.prototype.componentWillUnmount=function(){this.$EmojiInputButton1&&this.$EmojiInputButton1.cancel();this.$EmojiInputButton1=null};l.prototype.render=function(){var m=h._("Insert an emoji"),n=this.state.visible?c("joinClasses")(this.props.iconActiveClassName,this.props.iconClassName):this.props.iconClassName;return c("React").createElement(c("FocusRelocator.react"),{from:this.$EmojiInputButton3,to:this.$EmojiInputButton2},c("React").createElement(c("Link.react"),{"aria-label":m,className:this.props.buttonClassName,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":!this.state.visible?m:null,onClick:this.$EmojiInputButton4,onDragStart:function o(p){return p.preventDefault()},onMouseDown:this.$EmojiInputButton5,linkRef:function(o){return this.$EmojiInputButton3=o}.bind(this),role:"button"},c("React").createElement("div",{className:n,ref:function(o){return this.$EmojiInputButton2=o}.bind(this)}),this.$EmojiInputButton6()))};l.prototype.$EmojiInputButton6=function(){__p&&__p();if(!k){if(this.state.visible){this.$EmojiInputButton1=c("createCancelableFunction")(function(){this.forceUpdate()}.bind(this));c("Bootloader").loadModules(["EmojiPicker.react"],function(m){k=m;if(this.$EmojiInputButton1){this.$EmojiInputButton1();this.$EmojiInputButton1=null}}.bind(this),"EmojiInputButton.react")}return null}return c("React").createElement(k,{context:this.$EmojiInputButton3,isVariationsShown:this.state.isVariationsShown,onToggle:this.$EmojiInputButton7,onSelect:this.props.onSelect,onVariationsShown:this.$EmojiInputButton8,shown:this.state.visible})};f.exports=l}),null);
__d("TextDelightEvents",["Bootloader","EventEmitter","EventEmitterWithHolding","EventHolder"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("EventEmitter"))(),i=new(c("EventEmitterWithHolding"))(h,new(c("EventHolder"))());function j(){c("Bootloader").loadModules(["TextDelightController"],function(l){return l.init()},"TextDelightEvents")}var k={emitScrapablePost:function l(m){j();i.emit("potential_delight_in_post",{text:m})},emitScrapableComment:function l(m){j();i.emit("potential_delight_in_comment",{text:m})},addListener:function l(event,m){i.once(event,m)}};f.exports=k}),null);
__d("addFocusEvents",["Deferred","Event","React","SubscriptionList"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").Component,i=void 0,j=function(k){__p&&__p();return function(){__p&&__p();var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){"use strict";__p&&__p();if(!i){var o,p;i=new(c("SubscriptionList"))(function(){o=c("Event").listen(window,"blur",function(){i&&i.fireCallbacks(true);p&&p.remove();p=c("Event").listen(document.documentElement,"focusin",function(){i&&i.fireCallbacks(false);p&&p.remove();p=null})})},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null})}this.subscription=i.add(function(q){this.locked=q}.bind(this))};n.prototype.componentWillUnmount=function(){"use strict";this.subscription&&this.subscription.remove()};n.prototype.onClick=function(event){"use strict";this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus)};n.prototype.onFocus=function(event){"use strict";__p&&__p();if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new(c("Deferred"))();this.deferred.done(function(o){o&&o(event);this.deferred=null}.bind(this),function(){this.deferred=null}.bind(this))};n.prototype.onKeyUp=function(event){"use strict";this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus)};n.prototype.render=function(){"use strict";var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,["onKeyboardFocus","onMouseFocus"]);return c("React").createElement(k,babelHelpers["extends"]({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)}))};function n(){"use strict";l.apply(this,arguments)}return n}()}.bind(this);f.exports=j}),null);
__d("ReactionNuxTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",SPATIAL_REACTIONS_NUX:"spatial_reactions_nux"})}),null);
__d("UFIReactionsLinkImpl.react",["cx","fbt","BanzaiLogger","BootloadedComponent.react","Bootloader","Event","JSResource","React","ReactDOM","ReactionNuxTypeEnum","ShimButton.react","SubscriptionsHandler","SutroPhase2GatingConfig","SutroStoryHeaderUFIGatingConfig","UFICommentAction","UFIConfig","UFILikeWebDriverIDs","UFIReactionIconImpl.react","UFIReactionTypes","UFIStoryAction","addFocusEvents","shallowCompare","curry"],(function a(b,c,d,e,f,g,aa,h){__p&&__p();var i,j,k=c("React").Component,l=c("React").PropTypes,m=c("UFIConfig").reactionsFunnelLogger,n=c("UFIConfig").reactionsHasCommentFunnelLogger,o=c("UFIConfig").reactionsHasFunnelLogger,p=false,q=false,r=null,s=null,t=null,u=void 0,v=c("React").createElement("div",null),w=150,x=c("UFIConfig").reactionsAnimatedIconsPreloadIntent||"actions_hover",y=c("UFIReactionTypes").reactions,z=Object.keys(y),A=20,B=525,C=750,D=700,E=850,F=500,G="ontouchstart"in window,H=h._("Show more reactions"),I=h._("New! React to what's happening in different parts of the video"),J=[],K=function K(P){__p&&__p();if(!r){var Q=function Q(R){r=R;if(J){J.forEach(function(Q){return Q()});J=null}};if(c("UFIConfig").reactionsHasAnimatedIcons){c("Bootloader").loadModules(["UFIReactionsMenuWithAnimatedIcons.react"],Q,"UFIReactionsLinkImpl.react");if(x==="menu_bootload")M(function(R){return R.load(P)})}else c("Bootloader").loadModules(["UFIReactionsMenuImpl.react"],Q,"UFIReactionsLinkImpl.react")}},L=function L(P){if(!s||!t||!u){var Q=function Q(R,S,T){s=R;t=S;u=T;P()};c("Bootloader").loadModules(["SpatialReactionsProductionStore","SphericalVideoComponentActions","SpatialReactionClickAnimation","SpatialReactionFunnelLoggingStore"],Q,"UFIReactionsLinkImpl.react")}else P()},M=function M(P){if(c("UFIConfig").reactionsAnimatedIconsShouldPreload)c("Bootloader").loadModules(["UFIReactionsAnimationPreloader"],function(Q){return P(new Q().alsoBootloadKeyframes(c("UFIConfig").reactionsAnimatedIconsPreloadKeyframesModule||false).usePackage(c("UFIConfig").reactionsAnimatedIconsUsePackage||false))},"UFIReactionsLinkImpl.react")},N=c("addFocusEvents")("a");i=babelHelpers.inherits(O,k);j=i&&i.prototype;function O(P,Q){"use strict";__p&&__p();j.constructor.call(this,P,Q);this.$UFIReactionsLink3=function(){if(this.state.dialogShown)this.forceUpdate()}.bind(this);this.hideDialog=function(){this.setState({dialogShown:false,isScrubbing:false})}.bind(this);this.showDialog=function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown)this.state.logToFunnel&&m.menuShow(this.state.logAsComment);p=true;this.setState({dialogShown:true,NUXShown:false})}.bind(this);this.onClick=function(event){__p&&__p();var S,T=this;event.preventDefault();var U=this.props,V=U.reaction,W=U.suggestedReaction;if(!V||V===c("UFIReactionTypes").LIKE||!y[V])(function(){__p&&__p();if(!V&&T.props.nuxConfig){var X=T.props.nuxConfig.nuxType;if(X===c("ReactionNuxTypeEnum").LIKE_CLICK||X===c("ReactionNuxTypeEnum").LIKE_CLICK_RENUX)T.maybeShowNUX()}var Y=W&&T.hasSuggestedReaction?W:c("UFIReactionTypes").LIKE;V=V?c("UFIReactionTypes").NONE:Y;var Z=c("curry")(T.onReactionChange,V);T.$UFIReactionsLink4(V,true);if(T.$UFIReactionsLink6())L(function(){__p&&__p();if(s&&t){var $=s.getVideoPlayerController(this.props.contextArgs.instanceid);if($&&V===c("UFIReactionTypes").LIKE){t.clickLikeButton($.getVideoPlayerID());event.persist();if(!this.$UFIReactionsLink1)this.$UFIReactionsLink1=new u($,c("UFIReactionTypes").LIKE,Z);this.$UFIReactionsLink1.click(event)}else Z(event)}}.bind(T));else Z(event)})();else this.onReactionChange(0,event);this.setState({dialogShown:false,isScrubbing:false})}.bind(this);this.onClickCapture=function(event){event.stopPropagation();this.setState({isLongPressing:false})}.bind(this);this.onContextMenu=function(event){if(this.state.isTouchDown)event.preventDefault()}.bind(this);this.onMouseDown=function(event){clearTimeout(this.hoverTimeout)}.bind(this);this.onMouseEnter=function(event){__p&&__p();clearTimeout(this.hoverTimeout);var S=this.props.comment?D:B;if(!this.state.dialogShown)this.hoverTimeout=setTimeout(function(){this.showDialog();if(this.$UFIReactionsLink6())L(function(){if(s&&t){var T=s.getVideoPlayerController(this.props.contextArgs.instanceid);if(T)t.openReactionMenu(T.getVideoPlayerID())}}.bind(this))}.bind(this),S);K(this.props.supportedReactions);if(!this.state.dialogShown&&this.state.logToFunnel)this.logFunnelTimeout=setTimeout(function(){return m.likeButtonEnter(this.props.reaction,this.state.logAsComment)}.bind(this),w)}.bind(this);this.onMouseLeave=function(event){__p&&__p();clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);var S=this.props.comment?E:C;if(this.state.dialogShown)if(this.$UFIReactionsLink6())L(function(){if(s&&s.shouldLeaveReactionMenuOpen())this.$UFIReactionsLink7(this.hideDialog);else this.hoverTimeout=setTimeout(function(){this.hideDialog();if(s&&t){var T=s.getVideoPlayerController(this.props.contextArgs.instanceid);if(T)t.closeReactionMenu(T.getVideoPlayerID())}}.bind(this),S)}.bind(this));else this.hoverTimeout=setTimeout(this.hideDialog,S)}.bind(this);this.onReactionMenuMouseEnter=function(event){clearTimeout(this.hoverTimeout)}.bind(this);this.onTouchStart=function(event){__p&&__p();if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true})}.bind(this),F);K(this.props.supportedReactions)}this.setState({isTouchDown:true,isLongPressing:false})}.bind(this);this.onTouchEnd=function(event){if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false})}.bind(this);this.onTouchMove=function(event){__p&&__p();if(this.state.isScrubbing)return;var S=event.touches[0],T=S.clientX,U=S.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=T;this.dragStartY=U;return}if(typeof this.dragStartX==="number"&&typeof this.dragStartY==="number"&&(this.dragStartX>T+A||this.dragStartX<T-A||this.dragStartY>U+A||this.dragStartY<U-A))this.setState({isScrubbing:true})}.bind(this);this.onReactionChange=function(S,event){__p&&__p();var T=arguments.length<=2||arguments[2]===undefined?null:arguments[2],U=arguments.length<=3||arguments[3]===undefined?null:arguments[3];this.$UFIReactionsLink4(S);var V=c("ReactDOM").findDOMNode(this.refs.trigger);if(this.state.logToFunnel)event.target===V?m.likeButtonClick(S,this.state.logAsComment):m.reactionSelection(S,this.state.logAsComment);var W=void 0;if(this.props.comment)W=c("UFICommentAction").changeReaction(this.props.contextArgs,this.props.comment,S,V);else W=c("UFIStoryAction").changeReaction(this.props.contextArgs,S,V,T,U);this.context.dispatch(W);var X=function(){this.setState({dialogShown:false,isScrubbing:false})}.bind(this);if(this.$UFIReactionsLink6())L(function(){if(s)if(s.shouldLeaveReactionMenuOpen())this.$UFIReactionsLink7(function(){X()});else X()}.bind(this));else X()}.bind(this);this.onReactionMouseEnter=function(S,event){if(this.reactionsHoverStartTimeMap[S]===0)this.reactionsHoverStartTimeMap[S]=Date.now()}.bind(this);this.onReactionMouseLeave=function(S,event){if(this.reactionsHoverStartTimeMap[S]){this.reactionsHoverTotalTimeMap[S]+=Date.now()-this.reactionsHoverStartTimeMap[S];this.reactionsHoverStartTimeMap[S]=0}}.bind(this);this.onKeyboardFocus=function(){this.allowKeyboardFocus=true;this.showDialog()}.bind(this);this.onScreenReaderTrigger=function(){q=true;this.allowKeyboardFocus=true;this.showDialog()}.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=c("UFIConfig").reactionsHasSuggestedReaction;this.subscriptionsHandler=new(c("SubscriptionsHandler"))();if(J)J.push(this.$UFIReactionsLink3);var R=false;if(m&&(o&&this.props.comment===undefined||n&&this.props.comment!==undefined))R=true;this.state={allowAnimationPlayback:false,dialogShown:false,isLongPressing:false,isScrubbing:false,isTouchDown:false,logToFunnel:R,logAsComment:!!this.props.comment&&n,NUXShown:false,shouldBounce:false}}O.prototype.shouldComponentUpdate=function(P,Q){"use strict";return c("shallowCompare")(this,P,Q)};O.prototype.componentWillReceiveProps=function(P){"use strict";this.setState({shouldBounce:!!P.reaction&&P.reaction!==this.props.reaction})};O.prototype.componentWillUpdate=function(P,Q){"use strict";if(this.state.dialogShown&&!Q.dialogShown)this.$UFIReactionsLink4(this.props.reaction)};O.prototype.componentDidUpdate=function(P,Q){__p&&__p();var R,S=this;"use strict";if(!Q.dialogShown&&this.state.dialogShown){if(G)(function(){var T=void 0;S.subscriptionsHandler.addSubscriptions(c("Event").listen(document.documentElement,"touchstart",function(event){T=event.touches[0]}),c("Event").listen(document.documentElement,"touchmove",function(event){T=event.touches[0]}),c("Event").listen(document.documentElement,"touchend",function(event){if(T&&!this.refs.root.contains(document.elementFromPoint(T.clientX,T.clientY)))this.setState({dialogShown:false,isScrubbing:false})}.bind(S)))})()}else if(Q.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new(c("SubscriptionsHandler"))()}};O.prototype.componentDidMount=function(){"use strict";__p&&__p();this.$UFIReactionsLink5();if(this.props.nuxConfig){var P=this.props.nuxConfig.nuxType;if(P===c("ReactionNuxTypeEnum").SPATIAL_REACTIONS_NUX)this.maybeShowNUX()}if(c("UFIConfig").reactionsHasAnimatedIcons){c("Bootloader").loadModules(["KeyframesEnvironment","createCancelableFunction"],function(Q,R){if(!this.$UFIReactionsLink2){this.$UFIReactionsLink2=R(function(){this.setState({allowAnimationPlayback:true})}.bind(this));Q.whenRenderLoopHasBeenStableOnce().done(this.$UFIReactionsLink2)}}.bind(this),"UFIReactionsLinkImpl.react");M(function(Q){switch(x){case"link_mount":Q.load(this.props.supportedReactions);break;case"menu_bootload":break;case"actions_hover":Q.registerMouseTrigger(this.refs.root,this.props.supportedReactions);break}}.bind(this))}};O.prototype.componentWillUnmount=function(){"use strict";__p&&__p();this.subscriptionsHandler.release();if(J){var P=J.indexOf(this.$UFIReactionsLink3);if(P!==-1)J.splice(P,1)}if(this.$UFIReactionsLink2){this.$UFIReactionsLink2.cancel();this.$UFIReactionsLink2=null}};O.prototype.maybeShowNUX=function(){"use strict";__p&&__p();var P=null;if(this.props.nuxConfig)P=this.props.nuxConfig.nuxType;if(!p){p=true;this.setState({NUXShown:true,dialogShown:false});if(P!==c("ReactionNuxTypeEnum").SPATIAL_REACTIONS_NUX)c("BanzaiLogger").log("WebReactionsNuxLoggerConfig",{feedback_id:this.props.contextArgs.ftentidentifier,"interface":"www"})}};O.prototype.onDragStart=function(event){"use strict";event.preventDefault()};O.prototype.renderMenu=function(){"use strict";if(this.state.dialogShown)K(this.props.supportedReactions);if(!r)return null;var P=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return c("React").createElement(r,{allowAnimationPlayback:this.state.allowAnimationPlayback,allowKeyboardFocus:P,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:q,instanceId:this.props.contextArgs.instanceid,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions,showSpatialReactions:this.$UFIReactionsLink6()})};O.prototype.renderTrigger=function(){"use strict";__p&&__p();var P=this.props,Q=P.reaction,R=P.suggestedReaction;if(Q&&!y[Q])Q=null;var S=Q?c("UFILikeWebDriverIDs").UNLIKE_LINK:c("UFILikeWebDriverIDs").LIKE_LINK,T=void 0,U=void 0,V=void 0,W=void 0;if(this.props.comment){S=this.props.comment.parentcommentid?c("UFILikeWebDriverIDs").LIKE_LINK_REPLY:c("UFILikeWebDriverIDs").LIKE_LINK_COMMENT;var X=false;if(!Q)T=y[c("UFIReactionTypes").LIKE].display_name;else{T=y[Q].display_name;W=y[Q].color;X=true}V="UFILikeLink UFIReactionLink"+(X?" UFILinkBright":"")}else{if(!Q)T=R&&this.hasSuggestedReaction?y[R].display_name:y[c("UFIReactionTypes").LIKE].display_name;else T=y[Q].display_name;if(Q&&Q!=c("UFIReactionTypes").LIKE||!Q&&R&&this.hasSuggestedReaction&&R!=c("UFIReactionTypes").LIKE){var Y=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,Z=Y?"18":"13";U=c("React").createElement(c("UFIReactionIconImpl.react"),{className:"_1ktw"+(Y?" _2hoq":""),grayscale:!Q&&!!R,reaction:Q||R,size:Z})}var $=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi_animation;V="UFILikeLink _4x9- _4x9_"+(!U?" _48-k":"")+(Q?" UFILinkBright":"")+(this.state.shouldBounce&&!$?" _3_mo":"")+(this.state.shouldBounce&&$?" _614v":"");W=Q?y[Q].color:null}return c("React").createElement(N,{"aria-pressed":!!Q,className:V,"data-testid":S,href:"#",onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:r?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:G?this.onTouchEnd:null,onTouchMove:G?this.onTouchMove:null,onTouchStart:G?this.onTouchStart:null,ref:"trigger",role:"button",style:{color:W},tabIndex:0},U,T)};O.prototype.renderNUX=function(){"use strict";var P=this.refs.root,Q=this.props.comment!==undefined,R=this.props.nuxConfig&&this.props.nuxConfig.nuxType===c("ReactionNuxTypeEnum").SPATIAL_REACTIONS_NUX,S=this.props.nuxConfig&&this.props.nuxConfig.titleOverride,T=this.props.nuxConfig&&this.props.nuxConfig.textOverride;if(!this.state.NUXShown||!P)return null;if(R){S=I;T=null}return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:v,bootloadLoader:c("JSResource")("UFIReactionsNUX.react").__setRef("UFIReactionsLinkImpl.react"),context:P,titleOverride:S,textOverride:T,isCommentReactionNux:Q,isSpatialReactionNux:R,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey})};O.prototype.renderScreenReaderTrigger=function(){"use strict";if(r)return null;return c("React").createElement(c("ShimButton.react"),{className:"accessible_elem","data-accessibilityid":"virtual_cursor_trigger",inline:true,tabIndex:-1,onClick:this.onScreenReaderTrigger},H)};O.prototype.render=function(){"use strict";var P=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,Q=c("SutroPhase2GatingConfig").enabled_centered_ufi;return c("React").createElement("div",{className:"_khz"+(P?" _4sz1":"")+(Q?" _4rw5":"")+(this.state.isScrubbing?" _4bdq":"")+(Q?" _3wv2":""),ref:"root"},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX())};O.prototype.$UFIReactionsLink5=function(){"use strict";this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};z.forEach(function(P){this.reactionsHoverStartTimeMap[P]=0;this.reactionsHoverTotalTimeMap[P]=0}.bind(this))};O.prototype.$UFIReactionsLink6=function(){"use strict";return!!this.props.contextArgs.showSpatialReactions&&!this.props.comment};O.prototype.$UFIReactionsLink7=function(P){var Q;"use strict";if(s)(function(){var R=s.addListener(function(){if(s&&!s.shouldLeaveReactionMenuOpen()){R.remove();P()}})})()};O.prototype.$UFIReactionsLink4=function(P,Q){"use strict";__p&&__p();if(this.dialogShownTime!==0){var R={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:P,initial_reaction:this.props.reaction,"interface":"www",long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:Q,time_spent:Date.now()-this.dialogShownTime};for(var S in this.reactionsHoverTotalTimeMap){var T="time_spent_"+y[S].name.toLowerCase();R[T]=this.reactionsHoverTotalTimeMap[S]}c("BanzaiLogger").log("UserReactionsLoggerConfig",R);this.$UFIReactionsLink5()}};O.contextTypes={dispatch:l.func};f.exports=O}),null);
__d("CommentPrelude",["BanzaiODS","CSS","ErrorUtils","Parent","clickRefAction","ex","ifRequired"],(function a(b,c,d,e,f,g){__p&&__p();function h(n,o){if(n==="ufi.react"||n==="ufi_mentions_input.react"||n==="ufi_controller"||n==="action_link_bling"||n==="action_link_timeline_bling")return;var p=new Error(c("ex")("Deprecated CommentPrelude action %s called from ref %s",o||"unknown",n||"unknown"));p.type="warn";c("ErrorUtils").reportError(p);c("BanzaiODS").bumpEntityKey("comment_prelude",n)}function i(n,o,p){h(p,"click");var q=c("Parent").byTag(n,"form");if(!q||!c("CSS").hasClass(q,"collapsible_comments"))return;c("clickRefAction")("ufi",n,null,"FORCE");return j(n,o,p)}function j(n,o,p){__p&&__p();h(p,"expand");var q=c("Parent").byTag(n,"form");if(!q||!c("CSS").hasClass(q,"collapsible_comments"))return;k(q,p);if(o!==false){var r=q.add_comment_text_text||q.add_comment_text,s=r.length;if(s)if(!c("Parent").byClass(r[s-1],"UFIReplyList"))r=r[s-1];else if(!c("Parent").byClass(r[0],"UFIReplyList"))r=r[0];else r=null;if(r){r.focus();c("ifRequired")("FbFeedCommentUFIScroller",function(t){return t.reveal(r)})}}return false}function k(n,o){h(o,"uncollapse");if(!n||!c("CSS").hasClass(n,"collapsible_comments"))return;var p=c("CSS").removeClass.bind(null,n,"collapsed_comments");c("ifRequired")("ScrollAwareDOM",function(q){return q.monitor(n,p)},function(){return p()})}function l(n){var o=n.getAttribute("data-comment-prelude-ref");h(o,"blingbox");var p=c("Parent").byTag(n,"form");if(!p||!c("CSS").hasClass(p,"collapsible_comments"))return;c("CSS").toggleClass(p,"collapsed_comments")}var m={click:i,expand:j,uncollapse:k,onBlingboxClick:l,logRef:h};f.exports=m}),null);
__d("URITruncator",["fbt","URI"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=3,j=h._("..."),k=j.length||j.toString().length;function l(m,n){__p&&__p();if(!m||n===undefined||m.length<=n||n<=k||m.toString().length<=k)return m;if(!c("URI").isValidURI(m))return m.substring(0,n-k)+j;var o=new(c("URI"))(m),p=o.getOrigin();if(p.length>n-k)return p.substring(0,n-k)+j;var q=false;if(!!o.getFragment()){q=true;o.setFragment("");if(o.toString().length<=n-k)return o.toString()+j}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=n-k)return o.toString()+j}}}var u=o.getPath()+(q?j:""),v=u.split("/"),w=p.length+u.length-n,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+k+i<=z.length){var A=z.length-1,B=z.length-w-k,C=/[a-zA-Z0-9]/;w+=k;while(w>0){while(A>0&&C.test(z[A])){A--;w--}while(A>0&&!C.test(z[A])){A--;w--}}if(A===0)A=B-1;v[y]=z.substring(0,A+1)+j}else{x++;w-=z.length;if(x===1)w+=k;else w--}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,j)}var D=p+v.join("/");if(D.length>n)D=D.substring(0,n-k)+j;return D}f.exports=l}),null);
__d("UserHovercardLocation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INVALID:"unknown",NONE:"none",HC_FRIEND_BROWSER:"hc_friend_browser",HC_FRIENDS_TAB:"hc_friends_tab",HC_PROFILE_BROWSER:"hc_profile_browser",HC_STREAM:"hc_stream",HC_TIMELINE:"hc_timeline",HC_UFI:"hc_ufi",HC_REMINDER_POKE:"hc_reminder_poke",HC_REMINDER_BIRTHDAY:"hc_reminder_birthday",HC_EVENT_GUEST:"hc_event_guest",HC_UNKNOWN:"hc_unknown",HC_NUX:"hc_nux_page_suggestion",FRIEND_BROWSER:"friend_browser",FRIENDS_TAB:"friends_tab",PROFILE_BROWSER:"profile_browser",STREAM:"stream",TIMELINE:"timeline",UFI:"ufi",UFI_ADMIN:"ufi_admin",REMINDER_POKE:"reminder_poke",REMINDER_BIRTHDAY:"reminder_birthday",REMINDER_FACEVERSARY:"reminder_faceversary",REMINDER_NAMEDAY:"reminder_nameday",REMINDER_WORK_ANNIVERSARY:"reminder_work_anniversary",EVENT_GUEST:"event_guest",NUX_PAGE_SUGGESTION:"hc_nux_page_suggestion",TIMELINE_FRIENDS_BOX:"tl_fr_box",CHAT:"chat",GROUP:"group",GROUP_DIALOG:"group_dialog",MARKETPLACE_HOVERCARD:"marketplace_hovercard"})}),null);
__d("XUFICommentTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/tooltip/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("XUFIReactionsSocialSentenceTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/reaction/sentence/tooltip/",{ft_ent_identifier:{type:"String",required:true},user_count:{type:"Int"},client_id:{type:"String"}})}),null);
__d("XUFIShareTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/share/tooltip/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);