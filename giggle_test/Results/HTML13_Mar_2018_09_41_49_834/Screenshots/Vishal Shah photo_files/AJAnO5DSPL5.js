if (self.CavalryLogger) { CavalryLogger.start_js(["T4izS"]); }

__d("XMeEndpointController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/me/{*view}/",{view:{type:"String",defaultValue:""}})}),null);
__d("ReactComposerMediaDialog.react",["cx","fbt","Arbiter","DialogExpansion","DOMContainer.react","FBConfirmDialog.react","LayerFadeOnShow","React","ReactComponentWithPureRenderMixin","ReactComposerEvents","ReactComposerHandleUnsavedChanges","ReactComposerMediaUtils","SubscriptionsHandler","XMeEndpointController","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","goURI","throttle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=500,l=500,m=c("React").createClass({displayName:"ReactComposerMediaDialog",_subscriptions:c("SubscriptionsHandler"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{composerDOM:j.any.isRequired,composerID:j.string.isRequired,onDismiss:j.func.isRequired},getInitialState:function n(){return{shown:true,showConfirmDialog:false}},componentWillMount:function n(){this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(c("Arbiter").subscribe(c("ReactComposerEvents").POST_SUCCEEDED+this.props.composerID,c("throttle")(this._success,l)))},componentWillUnmount:function n(){this._subscriptions.release()},render:function n(){var o=this.state.showConfirmDialog?this._renderDismissConfirmation():null;return c("React").createElement("div",null,o,c("React").createElement(c("XUIDialog.react"),{behaviors:{DialogExpansion:c("DialogExpansion"),LayerFadeOnShow:c("LayerFadeOnShow")},className:"_51ly",shown:this.state.shown,width:k,layerHideOnBlur:false},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},i._("Upload Photos\/Videos"),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Close"),onClick:this._showConfirmDialog})),c("React").createElement(c("XUIDialogBody.react"),{className:"_51lz"},c("React").createElement(c("DOMContainer.react"),null,this.props.composerDOM))))},_renderDismissConfirmation:function n(){return c("React").createElement(c("FBConfirmDialog.react"),{content:c("ReactComposerHandleUnsavedChanges").getUnsavedChangesMessage(this.props.composerID),onCancel:this._cancelDismiss,onConfirm:this._dismiss,onToggle:this._cancelDismiss,shown:true,title:i._("Discard Changes"),cancelButtonText:i._("No"),confirmButtonText:i._("Discard Changes")})},_showConfirmDialog:function n(){this.setState({showConfirmDialog:true})},_cancelDismiss:function n(){this.setState({showConfirmDialog:false})},_dismiss:function n(){this.setState({shown:false,showConfirmDialog:false});this.props.onDismiss&&this.props.onDismiss()},_success:function n(){this._dismiss();var o=c("XMeEndpointController").getURIBuilder().setString("view","timeline").getURI();c("goURI")(o)}});f.exports=m}),null);
__d("ReactComposerTimelineStore",["ReactComposerActionStore","ReactComposerMediaConfig","ReactComposerPostUtils","ReactComposerStore","TimelineComposer","formatDate"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerActionStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this)}j.prototype.__onPostStarted=function(k){"use strict";__p&&__p();var l=c("ReactComposerStore").getScheduledPublishTime(k.composerID);if(l){var m=c("formatDate")(l,"m/d/Y",{skipPatternLocalization:true}),n=60*(60*l.getHours()+l.getMinutes()),o=l.getTime()/1e3;k.config.contextInfo.scheduled=true;k.config.contextInfo.future_date=m;k.config.contextInfo.future_time=n;k.config.contextInfo.scheduled_publish_time=o}c("ReactComposerPostUtils").post({actorID:k.actorID,composerConfig:k.config,composerID:k.composerID,targetID:k.targetID})};j.prototype.__canPost=function(k){"use strict";return!c("ReactComposerPostUtils").isPostButtonDisabled(k.composerID,c("ReactComposerMediaConfig").photo.limit)};j.prototype.__cleanup=function(k){"use strict";c("TimelineComposer").destroy()};f.exports=new j()}),null);
__d("ReactComposerTimelineMediaPostButtonContainer.react",["React","ReactComposerContextTypes","ReactComposerMediaPostButtonContainerMixin","ReactComposerTimelineStore"],(function a(b,c,d,e,f,g){var h=c("React").createClass({displayName:"ReactComposerTimelineMediaPostButtonContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerMediaPostButtonContainerMixin")],getDefaultProps:function i(){return{useDefaultScheduleComponent:true}},componentDidMount:function i(){c("ReactComposerTimelineStore").registerComposerID(this.context.composerID)}});f.exports=h}),null);
__d("ReactMediaComposer.react",["cx","Arbiter","React","ReactComposer.react","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerEvents","ReactComposerMediaEagerAttachment.react","ReactComposerPrefillConfig","ReactComposerPrefillUtils","ReactComposerStatusEagerAttachment.react","ReactComposerTimelineMediaPostButtonContainer.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").createClass({displayName:"ReactMediaComposer",mixins:[c("ReactComposerContextProviderMixin")],propTypes:{contextConfig:c("ReactComposerContextConfig").isRequired,config:c("ReactComposerConfig").isRequired,prefillConfig:c("ReactComposerPrefillConfig").isRequired},componentWillMount:function j(){c("ReactComposerPrefillUtils").prefill(this.props.contextConfig.composerID,this.props.prefillConfig)},componentDidMount:function j(){var k=this.props.prefillConfig;if(k&&k.selectedAttachment){c("ReactComposerAttachmentActions").selectAttachment(this.props.contextConfig.composerID,k.selectedAttachment,k.shouldActivateSelectedAttachment);if(k.shouldActivateSelectedAttachment)c("Arbiter").inform(c("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID)}},render:function j(){var k=this.props.prefillConfig.selectedAttachment,l=this._getAttachments(k);return c("React").createElement(c("ReactComposer.react"),{className:"_1nby",loggingConfig:this.props.config.loggingConfig,activateOnInit:true,activateOnInitEntryPoint:this.props.config.triggeredFrom},c("React").createElement(c("ReactComposerBodyContainer.react"),{expanded:this.props.config.showExpandedComposer},l,this.props.children))},_getAttachments:function j(k){var l=[];l.push(c("React").createElement(c("ReactComposerStatusEagerAttachment.react"),{config:this.props.config,key:"status",prefillConfig:this.props.prefillConfig,postButtonModule:c("ReactComposerTimelineMediaPostButtonContainer.react"),selected:k===c("ReactComposerAttachmentType").STATUS,scrapeLinkOnInit:false}));l.push(c("React").createElement(c("ReactComposerMediaEagerAttachment.react"),{key:"media",config:this.props.config,prefillConfig:this.props.prefillConfig,postButtonModule:c("ReactComposerTimelineMediaPostButtonContainer.react"),selected:k===c("ReactComposerAttachmentType").MEDIA}));return l}});f.exports=i}),null);
__d("ReactMediaComposerInit",["AsyncRequest","Bootloader","CSS","DOM","Event","PUWMethods","React","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextConfig","ReactComposerInit","ReactComposerLoggingName","ReactComposerMediaDialog.react","ReactComposerPrefillConfig","ReactDOM","ReactMediaComposer.react","Run","$"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={_composerDOM:null,_mountContainer:null,init:function i(j){__p&&__p();this._composerDOM=c("DOM").create("div");this._mountContainer=c("DOM").create("div");var k=c("$")("timeline-medley"),l=j.contextConfig.composerID,m=c("DOM").scry(k,'input[name="composer_photo[]"]')[0],n=c("ReactComposerAttachmentType").STATUS;if(m){this._inputDOM=m;c("Event").listen(this._inputDOM,"change",function(){if(this._inputDOM.files&&this._inputDOM.files.length>0){this._uploadExistingFiles(this._inputDOM.files,l,j);c("ReactComposerAttachmentActions").selectAttachment(l,c("ReactComposerAttachmentType").MEDIA,true,c("ReactComposerLoggingName").MEDIA_COMPOSER_ON_INIT)}}.bind(this));if(m.files&&m.files.length>0){n=c("ReactComposerAttachmentType").MEDIA;this._uploadExistingFiles(m.files,l,j)}}j.prefillConfig={selectedAttachment:n,shouldActivateSelectedAttachment:true};c("ReactComposerInit").init(c("ReactMediaComposer.react"),j,this._composerDOM);c("ReactDOM").render(c("React").createElement(c("ReactComposerMediaDialog.react"),{composerDOM:this._composerDOM,composerID:l,onDismiss:this._cleanup.bind(this)}),this._mountContainer);c("DOM").appendContent(document.body,this._mountContainer);c("Run").onUnload(this._cleanup.bind(this));c("Run").onLeave(this._cleanup.bind(this))},_cleanup:function i(){setTimeout(function(){this._composerDOM&&c("ReactDOM").unmountComponentAtNode(this._composerDOM);this._mountContainer&&c("ReactDOM").unmountComponentAtNode(this._mountContainer)}.bind(this),0)},_uploadExistingFiles:function i(j,k,l){var m=l.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];c("Bootloader").loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(n,o){return n.uploadPhotosOrVideo(k,Array.prototype.slice.call(j),new o(l.contextConfig,m.photoLimit,{disableFaceRecognition:m.disableFaceboxTagger}),l.config.targetData.targetSupportsMultiplePhotos,c("PUWMethods").FILE_SELECTOR,l.config.targetData.targetSupportsMultiMedia,m)},"ReactMediaComposerInit")},setupFileUploadToComposerDialog:function i(j,k,l){var m=function m(n){c("CSS").conditionClass(j.getControl(),l,n);j.getInput().disabled=n};j.subscribe("change",function(){new(c("AsyncRequest"))().setURI(k).setErrorHandler(function(){j.clear();m(false)}).setHandler(function(){m(false)}).send();m(true)})}};f.exports=h}),null);